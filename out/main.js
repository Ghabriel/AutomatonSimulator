!function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return s(i||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){var e=function info(){var t,e=navigator.userAgent.toLowerCase(),i=function(t){return t.test(e)},n={msie:i(/msie/)||i(/trident/),edge:i(/edge/),firefox:i(/mozilla/)&&i(/firefox/),chrome:i(/webkit/)&&i(/chrome/)&&!i(/edge/),safari:i(/safari/)&&i(/applewebkit/)&&!i(/chrome/),opera:i(/opera/)},r="",o="Unknown";for(t in n)if(n.hasOwnProperty(t)&&n[t]){r=t;var a=new RegExp(t+"( |/)([0-9]+)"),s=e.match(a);s?o=s[2]:(s=e.match(/rv:([0-9]+)/))&&(o=s[1])}return{name:r,version:o}}();t.name=e.name,t.version=e.version}(i.Browser||(i.Browser={}))},{}],2:[function(t,e,i){"use strict";function preventDebugging(t){return t.restricted||o>0&&s>=o}function isDebugActive(){var t=!!window.debugMode;return 0===a&&t}function getColor(t){return 0==t.color.length?"":"color: "+t.color}function log(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(isDebugActive()){for(var n="",r=0;r<t;r++)n+="    ";e.length>0&&"string"==typeof e[0]&&(e[0]=n+e[0],n=""),n.length>0?console.log.apply(console,[n].concat(e)):console.log.apply(console,e)}}i.__esModule=!0;var n={AutomatonRenderer:{color:"orange",disabled:!0},MainController:{color:"lime",disabled:!0},FAController:{color:"red",restricted:!0},PDAController:{color:"red",restricted:!0},LBAController:{color:"red",restricted:!0},LBA:{color:"orange"},default:{color:""}},r=!0,o=-1,a=0,s=0;i.expose=function expose(t){for(var e in t)window[e]=t[e]},i.debug=function debug(t){function call(i,o){for(var l=[],c=2;c<arguments.length;c++)l[c-2]=arguments[c];var u=t.constructor.name,h=n[u]||n.default,d=preventDebugging(h);h.disabled&&a++,log.apply(void 0,[s,"%c["+u+"]",getColor(h),i].concat(l)),s++,d&&a++;var p=o.call.apply(o,[e].concat(l));if(s--,void 0!==p)if(r)try{var g=JSON.parse(JSON.stringify(p));log(s,"=>",g)}catch(t){log(s,"=>*",p)}else log(s,"=>*",p);return d&&a--,h.disabled&&a--,p}var e=t;for(var i in t)!function(i){var n=t[i];n instanceof Function?e[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return call.apply(void 0,[i,n].concat(t))}:e[i]=n}(i);return e}},{}],3:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Settings"),r=t("./Utils");!function(t){t.addEdgeData=function addEdgeData(t,e){var i=t.origin,r=t.target,o=n.Settings.controller();t.textList.push(o.edgeDataToText(e)),t.dataList.push(e),o.createTransition(i,r,e)},t.edgeIteration=function edgeIteration(t,e){r.utils.foreach(t,function(t,i){r.utils.foreach(i,function(t,i){e(i)})})}}(i.EdgeUtils||(i.EdgeUtils={}))},{"./Settings":9,"./Utils":12}],4:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Utils"),r=function(){function Initializer(){}return Initializer.exec=function(t){n.utils.foreach(t,function(t,e){e.init()})},Initializer}();i.Initializer=r},{"./Utils":12}],5:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){t.keys={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,ENTER:13,SHIFT:16,SPACE:32,ESC:27,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,"+":61,"-":173},t.symbols={delta:"δ",epsilon:"ε",gamma:"Γ",sigma:"Σ",leftArrow:"←",rightArrow:"→"}}(i.Keyboard||(i.Keyboard={}))},{}],6:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./EdgeUtils"),r=t("./Settings"),o=t("./SignalEmitter"),a=t("./System"),s=t("./Utils"),l=function(){function MainController(t,e,i){this.stateList={},this.edgeList={},this.initialState=null,this.frozenMemento=!1,this.loadingMode=!1,this.renderer=t,this.memento=e,this.persistenceHandler=i,t.setController(this),o.SignalEmitter.addSignalObserver(this),a.System.addLanguageChangeObserver({onLanguageChange:function(){t.onLanguageChange()}}),a.System.addMachineChangeObserver({onMachineChange:function(){t.onMachineChange()}})}return MainController.prototype.receiveSignal=function(t){return t.targetID==r.Settings.mainControllerSignalID?{reacted:!0,response:this[t.identifier].apply(this,t.data)}:null},MainController.prototype.clear=function(){this.stateList={},this.edgeList={},this.initialState=null,this.renderer.clear(),r.Settings.controller().clear()},MainController.prototype.empty=function(){return 0==Object.keys(this.stateList).length},MainController.prototype.save=function(){return this.persistenceHandler.save(this.stateList,this.edgeList,this.initialState)},MainController.prototype.load=function(t){this.internalLoad(t),this.pushState()},MainController.prototype.undo=function(){var t=this.memento.undo();t&&this.clearAndLoad(t)},MainController.prototype.redo=function(){var t=this.memento.redo();t&&this.clearAndLoad(t)},MainController.prototype.recognitionHighlight=function(t){this.renderer.recognitionHighlight(t)},MainController.prototype.recognitionDim=function(){this.renderer.recognitionDim()},MainController.prototype.lock=function(){this.renderer.lock()},MainController.prototype.unlock=function(){this.renderer.unlock()},MainController.prototype.stateManualCreation=function(){this.renderer.stateManualCreation()},MainController.prototype.edgeManualCreation=function(){this.renderer.edgeManualCreation()},MainController.prototype.createState=function(t){var e=this.cleanup(t);this.empty()&&(e.initial=!0,this.initialState=e),this.stateList[e.name]=e,this.renderer.createState(e),r.Settings.controller().createState(e)},MainController.prototype.createEdge=function(t){this.createMergedTransition(t),this.renderer.createEdge(t)},MainController.prototype.createMergedTransition=function(t){var e=this.cleanup(t);this.internalCreateEdge(e);for(var i=e.origin,n=e.target,r=0,o=e.dataList;r<o.length;r++){var a=o[r];this.remoteCreateTransition(i,n,a)}},MainController.prototype.remoteCreateTransition=function(t,e,i){r.Settings.controller();r.Settings.controller().createTransition(t,e,i)},MainController.prototype.renameState=function(t,e){if(this.stateExists(e))return!1;var i=this.internal(t);return delete this.stateList[i.name],s.utils.rerouteEdges(this.edgeList,i.name,e),this.stateList[e]=i,i.name=e,r.Settings.controller().renameState(t,e),this.renderer.renameState(t,e),!0},MainController.prototype.toggleInitialFlag=function(t){var e=this.internal(t);e==this.initialState?(e.initial=!1,this.initialState=null):(this.initialState&&(this.initialState.initial=!1,r.Settings.controller().changeInitialFlag(this.initialState)),e.initial=!0,this.initialState=e),this.renderer.toggleInitialFlag(e),r.Settings.controller().changeInitialFlag(e)},MainController.prototype.toggleFinalFlag=function(t){var e=this.internal(t);e.final=!e.final,this.renderer.toggleFinalFlag(e),r.Settings.controller().changeFinalFlag(e)},MainController.prototype.changeTransitionOrigin=function(t,e){var i=this.internal(t);this.remoteDeleteEdge(i),this.internalDeleteEdge(i),i.origin=this.internal(e),this.internalCreateEdge(i),this.renderer.changeTransitionOrigin(t,e),this.rebuildEdge(i)},MainController.prototype.changeTransitionTarget=function(t,e){var i=this.internal(t);this.remoteDeleteEdge(i),this.internalDeleteEdge(i),i.target=this.internal(e),this.internalCreateEdge(i),this.renderer.changeTransitionTarget(t,e),this.rebuildEdge(i)},MainController.prototype.changeTransitionData=function(t,e,i,n){var o=this.internal(t),a=o.origin,l=o.target,c=o.dataList,u=o.textList,h=r.Settings.controller();h.deleteTransition(a,l,c[e]),c[e]=s.utils.clone(i),u[e]=n,h.createTransition(a,l,i),this.renderer.changeTransitionData(o,e,i,n)},MainController.prototype.deleteState=function(t){if(this.stateExists(t.name)){var e=this.internal(t);this.removeEdgesOfState(e),delete this.stateList[e.name],this.renderer.deleteState(e),r.Settings.controller().deleteState(e)}},MainController.prototype.deleteTransition=function(t,e){var i=this.internal(t),n=i.origin,o=i.target,a=i.dataList,s=i.textList;r.Settings.controller().deleteTransition(n,o,a[e]),a.splice(e,1),s.splice(e,1),0==a.length?this.deleteEdge(i):this.renderer.deleteTransition(i,e)},MainController.prototype.deleteEdge=function(t){var e=this.internal(t);this.internalDeleteEdge(e),this.renderer.deleteEdge(e);for(var i=e.origin,n=e.target,o=e.dataList,a=r.Settings.controller(),s=0,l=o;s<l.length;s++){var c=l[s];a.deleteTransition(i,n,c)}},MainController.prototype.internalDeleteEdge=function(t){this.edgeList.hasOwnProperty(t.origin.name)&&delete this.edgeList[t.origin.name][t.target.name]},MainController.prototype.getFormalDefinitionCallback=function(){var t=this;return function(){return!t.loadingMode&&(t.frozenMemento||t.pushState(),!0)}},MainController.prototype.onStateDrag=function(t){var e=this.internal(t);e.x=t.x,e.y=t.y,this.pushState()},MainController.prototype.removeEdgesOfState=function(t){var e=this;n.EdgeUtils.edgeIteration(this.edgeList,function(i){var n=i.origin,r=i.target;n!=t&&r!=t||e.internalDeleteEdge(i)})},MainController.prototype.internalCreateEdge=function(t){var e=t.origin,i=t.target;if(this.edgeList.hasOwnProperty(e.name)||(this.edgeList[e.name]={}),this.edgeList[e.name].hasOwnProperty(i.name)){var n=this.edgeList[e.name][i.name];(r=n.dataList).push.apply(r,t.dataList),(o=n.textList).push.apply(o,t.textList);var r,o}else this.edgeList[e.name][i.name]=t},MainController.prototype.remoteDeleteEdge=function(t){for(var e=r.Settings.controller(),i=0,n=t.dataList;i<n.length;i++){var o=n[i];e.deleteTransition(t.origin,t.target,o)}},MainController.prototype.rebuildEdge=function(t){for(var e=0,i=t.dataList;e<i.length;e++){var n=i[e];this.remoteCreateTransition(t.origin,t.target,n)}},MainController.prototype.pushState=function(){this.memento.push(this.save())},MainController.prototype.clearAndLoad=function(t){this.frozenMemento=!0,this.clear(),this.frozenMemento=!1,this.internalLoad(t)},MainController.prototype.stateExists=function(t){return this.stateList.hasOwnProperty(t)},MainController.prototype.internalLoad=function(t){this.loadingMode=!0,this.frozenMemento=!0;var e=this.persistenceHandler.load(t);return e.error?(alert(r.Strings.INVALID_FILE),this.loadingMode=!1,void(this.frozenMemento=!1)):e.aborted?(this.loadingMode=!1,void(this.frozenMemento=!1)):(this.stateList=e.stateList,this.edgeList=e.edgeList,this.initialState=e.initialState,this.renderer.setStateList(this.stateList),this.renderer.setEdgeList(this.edgeList),this.loadingMode=!1,this.renderer.triggerFormalDefinitionChange(),void(this.frozenMemento=!1))},MainController.prototype.internal=function(t){return"state"==t.type?this.stateList[t.name]:this.edgeList[t.origin.name][t.target.name]},MainController.prototype.cleanup=function(t){return"state"==t.type?{x:t.x,y:t.y,initial:t.initial,final:t.final,name:t.name,type:t.type}:{origin:this.cleanup(t.origin),target:this.cleanup(t.target),textList:s.utils.clone(t.textList),dataList:s.utils.clone(t.dataList),type:t.type}},MainController}();i.MainController=l},{"./EdgeUtils":3,"./Settings":9,"./SignalEmitter":10,"./System":11,"./Utils":12}],7:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function Memento(t){this.offset=0,this.historyPointer=-1,this.states={},this.limit=t}return Memento.prototype.push=function(t){this.historyPointer==this.limit()?(delete this.states[this.offset],this.offset++):this.historyPointer++;var e=this.index();this.states[e]=t;for(var i=1;this.states[e+i];)delete this.states[e+i],i++},Memento.prototype.undo=function(){return this.historyPointer>0?(this.historyPointer--,this.states[this.index()]):null},Memento.prototype.redo=function(){return this.states[this.index()+1]?(this.historyPointer++,this.states[this.index()]):null},Memento.prototype.index=function(){return this.offset+this.historyPointer},Memento}();i.Memento=n},{}],8:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Keyboard"),r=t("./Settings"),o=t("./System"),a=t("./Utils"),s=function(){function Prompt(t){this.inputs=[],this.explicitPosition=null,this.successCallback=null,this.abortCallback=null,this.message=t}return Prompt.prototype.addInput=function(t){this.inputs.push(t)},Prompt.prototype.setPosition=function(t,e){this.explicitPosition={x:t,y:e}},Prompt.prototype.setDefaultValues=function(t){for(var e=0;e<t.length;e++)this.inputs[e].defaultValue=t[e]},Prompt.prototype.onSuccess=function(t){this.successCallback=t},Prompt.prototype.onAbort=function(t){t&&(this.abortCallback=t)},Prompt.prototype.show=function(){var t=a.utils.create("div",{className:"click_blocker"}),e=a.utils.create("div",{id:"system_prompt"});e.innerHTML=this.message+"<br>";var i=a.utils.id(r.Settings.mainbarID);this.explicitPosition&&(e.classList.add("floating"),e.style.left=i.offsetLeft+this.explicitPosition.x+"px",e.style.top=i.offsetTop+this.explicitPosition.y+"px");for(var s=!1,l=function(){document.body.removeChild(t),o.System.unblockEvents(),$(e).slideUp(r.Settings.promptSlideHideInterval,function(){i.removeChild(e)})},c=[],u=this,h=function(){for(var t=!0,e=0,i=c;e<i.length;e++){var n=i[e],r=parseInt(n.id.replace("system_prompt_input_","")),o=u.inputs[r].validator;o&&(o(n.value)?c[r].classList.remove("invalid"):(c[r].classList.add("invalid"),t=!1))}return t},d=a.utils.create("input",{type:"button",value:r.Strings.PROMPT_CONFIRM,click:function(){if(!s){for(var t=!0,e=[],i=0,n=c;i<n.length;i++){var r=n[i],o=parseInt(r.id.replace("system_prompt_input_","")),a=u.inputs[o].validator;if(a&&!a(r.value)){t=!1;break}e.push(r.value)}t&&(s=!0,l(),u.successCallback&&u.successCallback(e))}}}),p=a.utils.create("input",{type:"button",value:r.Strings.PROMPT_CANCEL,click:function(){s||(s=!0,l(),u.abortCallback&&u.abortCallback())}}),g=0;g<this.inputs.length;g++){var f=void 0;(f=this.inputs[g].initializer?this.inputs[g].initializer():a.utils.create("input",{type:"text",placeholder:this.inputs[g].placeholder||"",value:this.inputs[g].defaultValue||""})).id="system_prompt_input_"+g;var S=/input/i.test(f.tagName);(S=S&&"text"==f.type)?(f.addEventListener("keydown",function(t){t.keyCode==n.Keyboard.keys.ENTER?d.click():t.keyCode==n.Keyboard.keys.ESC&&p.click()}),f.addEventListener("keyup",function(t){var e=t.keyCode==n.Keyboard.keys.ENTER,i=t.keyCode==n.Keyboard.keys.ESC;e||i||(d.disabled=!h())})):f.addEventListener("focus",function(t){d.disabled=!h()}),c.push(f),e.appendChild(f)}d.disabled=!h(),e.appendChild(d),e.appendChild(p),document.body.insertBefore(t,document.body.children[0]),o.System.blockEvents(),$(e).toggle(),i.insertBefore(e,i.children[0]),$(e).slideDown(r.Settings.promptSlideShowInterval,function(){c[0].focus()})},Prompt.simple=function(t,e,i,s){var l=a.utils.create("div",{className:"click_blocker"}),c=a.utils.create("div",{id:"system_prompt"});c.innerHTML=t+"<br>";for(var u=a.utils.id(r.Settings.mainbarID),h=!1,d=function(){document.body.removeChild(l),o.System.unblockEvents(),$(c).slideUp(r.Settings.promptSlideHideInterval,function(){u.removeChild(c)})},p=[],g=a.utils.create("input",{type:"button",value:r.Strings.PROMPT_CONFIRM,click:function(){if(!h){h=!0;for(var t=[],e=0,n=p;e<n.length;e++){var r=n[e];t.push(r.value)}d(),i(t)}}}),f=a.utils.create("input",{type:"button",value:r.Strings.PROMPT_CANCEL,click:function(){h||(h=!0,d(),s&&s())}}),S=0;S<e;S++){var y=a.utils.create("input",{type:"text"});y.addEventListener("keydown",function(t){t.keyCode==n.Keyboard.keys.ENTER?g.click():t.keyCode==n.Keyboard.keys.ESC&&f.click()}),p.push(y),c.appendChild(y)}c.appendChild(g),c.appendChild(f),document.body.insertBefore(l,document.body.children[0]),o.System.blockEvents(),$(c).toggle(),u.insertBefore(c,u.children[0]),$(c).slideDown(r.Settings.promptSlideShowInterval,function(){p[0].focus()})},Prompt}();i.Prompt=s},{"./Keyboard":5,"./Settings":9,"./System":11,"./Utils":12}],9:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./lists/MachineList"),o=t("./lists/ControllerList"),a=t("./lists/LanguageList"),s=t("./lists/InitializerList"),l=t("./lists/OperationList"),c=t("./Initializer"),u=t("./Utils");!function(t){function getController(t){return new o[t+"Controller"]}function getInitializable(t){return new s["init"+t]}function buildOperationMap(t){var e={};return u.utils.foreach(t,function(t,i){e[i.name]=i.command}),e}function update(){if(p)for(var e in t.Machine)if(t.Machine.hasOwnProperty(e)&&!isNaN(parseInt(e))){var i=t.Machine[e];n[e]=getController(i),h[e]=getInitializable(i),d[e]=buildOperationMap(l[i])}var r={};for(var e in t.Machine)t.Machine.hasOwnProperty(e)&&!isNaN(parseInt(e))&&(r[e]={name:t.language.strings[t.Machine[e]],abbreviatedName:t.Machine[e],sidebar:[],controller:n[e],initializer:h[e],operations:d[e]});u.utils.foreach(r,function(e,i){t.machines[parseInt(e)]=i}),c.Initializer.exec(h),p&&t.machines[t.currentMachine].initializer.onEnter(),p=!1}t.sidebarID="sidebar",t.mainbarID="mainbar",t.imageFolder="images/",t.sidebarSignalID="sidebar",t.mainControllerSignalID="mainController",t.disabledButtonClass="disabled",t.canvasShortcutID="canvas",t.undoMaxAmount=3,t.menuSlideInterval=300,t.promptSlideHideInterval=100,t.promptSlideShowInterval=200,t.machineSelectionColumns=1,t.machineActionColumns=2,t.tapeDisplayedChars=7,t.multRecognitionAreaRows=8,t.multRecognitionAreaCols=15,t.stateRadius=32,t.stateRingRadius=27,t.stateDragTolerance=50,t.stateNameMaxLength=6,t.stateLabelFontFamily="arial",t.stateLabelFontSize=20,t.stateLabelFontColor="black",t.stateInitialMarkLength=40,t.stateInitialMarkHeadLength=15,t.stateInitialMarkAngle=u.utils.toRadians(20),t.stateInitialMarkColor="blue",t.stateInitialMarkThickness=2,t.stateDefaultPalette={fillColor:"white",strokeColor:"black",strokeWidth:1,ringStrokeWidth:1},t.stateHighlightPalette={fillColor:"#FFD574",strokeColor:"red",strokeWidth:3,ringStrokeWidth:2},t.stateRecognitionPalette={fillColor:"#CCC",strokeColor:"black",strokeWidth:3,ringStrokeWidth:2},t.edgeDefaultPalette={strokeColor:"black",arrowThickness:2,arrowLength:30,arrowAngle:u.utils.toRadians(30),textFontFamily:"arial",textFontSize:20,textFontColor:"black"},t.edgeHighlightPalette={strokeColor:"red",arrowThickness:t.edgeDefaultPalette.arrowThickness,arrowLength:t.edgeDefaultPalette.arrowLength,arrowAngle:t.edgeDefaultPalette.arrowAngle,textFontFamily:t.edgeDefaultPalette.textFontFamily,textFontSize:t.edgeDefaultPalette.textFontSize,textFontColor:t.edgeDefaultPalette.textFontColor},t.edgeFormalDefinitionHoverPalette={strokeColor:"blue",arrowThickness:3,arrowLength:t.edgeDefaultPalette.arrowLength,arrowAngle:t.edgeDefaultPalette.arrowAngle,textFontFamily:t.edgeDefaultPalette.textFontFamily,textFontSize:t.edgeDefaultPalette.textFontSize,textFontColor:t.edgeDefaultPalette.textFontColor},t.acceptedTestCaseColor="green",t.rejectedTestCaseColor="red",t.shortcuts={save:["ctrl","S"],open:["ctrl","O"],toggleInitial:["I"],toggleFinal:["F"],dimSelection:["ESC"],deleteEntity:["DELETE"],clearMachine:["C"],left:["LEFT"],right:["RIGHT"],up:["UP"],down:["DOWN"],undo:["ctrl","Z"],redo:["ctrl","Y"],focusTestCase:["ctrl","I"],dimTestCase:["ENTER"],fastForward:["R"],step:["ENTER"],stop:["ESC"]},t.languages=a,t.Machine=r.Machine,t.language=a.english,t.currentMachine=0,t.machines={},t.controller=function controller(){return t.machines[t.currentMachine].controller},t.supportedOperations=function supportedOperations(){return t.machines[t.currentMachine].operations};var e=[];t.addCustomSetting=function addCustomSetting(t,i){e.push([t,i])},t.getCustomSettings=function getCustomSettings(){return e};var n={},h={},d={},p=!0;t.update=update,t.changeLanguage=function changeLanguage(n){e=[],t.language=n,i.Strings=t.language.strings,update()},t.changeMachine=function changeMachine(e){t.machines[t.currentMachine].initializer.onExit(),t.currentMachine=e,t.machines[t.currentMachine].initializer.onEnter()},t.getResourcePath=function getResourcePath(e){return t.imageFolder+e}}(n=i.Settings||(i.Settings={})),i.Strings=n.language.strings},{"./Initializer":4,"./Utils":12,"./lists/ControllerList":29,"./lists/InitializerList":30,"./lists/LanguageList":31,"./lists/MachineList":32,"./lists/OperationList":33}],10:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function SignalEmitter(){}return SignalEmitter.addSignalObserver=function(t){this.signalObservers.push(t)},SignalEmitter.emitSignal=function(t){for(var e=0,i=this.signalObservers;e<i.length;e++){var n=i[e].receiveSignal(t);if(n&&n.reacted)return n.response}return null},SignalEmitter.signalObservers=[],SignalEmitter}();i.SignalEmitter=n},{}],11:[function(t,e,i){"use strict";function propertyName(t){return t+"Key"}i.__esModule=!0;var n=t("./Keyboard"),r=t("./Settings"),o=["alt","ctrl","shift"],a=function(){function System(){}return System.changeLanguage=function(t){r.Settings.changeLanguage(t);for(var e=0,i=this.languageChangeObservers;e<i.length;e++)i[e].onLanguageChange()},System.changeMachine=function(t){r.Settings.changeMachine(t);for(var e=0,i=this.machineChangeObservers;e<i.length;e++)i[e].onMachineChange()},System.addLanguageChangeObserver=function(t){this.languageChangeObservers.push(t)},System.addMachineChangeObserver=function(t){this.machineChangeObservers.push(t)},System.emitKeyEvent=function(t){for(var e={preventDefault:function(){}},i=0,r=o;i<r.length;i++)e[propertyName(r[i])]=!1;for(var a=0,s=t;a<s.length;a++){var l=s[a];o.indexOf(l)>=0?e[propertyName(l)]=!0:e.keyCode=n.Keyboard.keys[l.toUpperCase()]}this.keyEvent(e)},System.keyEvent=function(t){for(var e=!1,i=0,n=this.keyboardObservers;i<n.length;i++){var r=n[i],o=r.keys;!this.locked(r)&&this.shortcutMatches(t,o)&&(r.callback(),e=!0)}return!e||(t.preventDefault(),!1)},System.bindShortcut=function(t,e,i){this.keyboardObservers.push({keys:t,callback:e,group:i})},System.lockShortcutGroup=function(t){this.lockedGroups[t]=!0},System.unlockShortcutGroup=function(t){delete this.lockedGroups[t]},System.blockEvents=function(){this.eventBlock=!0},System.unblockEvents=function(){this.eventBlock=!1},System.shortcutMatches=function(t,e){if(this.eventBlock)return!1;for(var i=[],r=0,a=e;r<a.length;r++){var s=a[r];if(o.indexOf(s)>=0){if(i.push(s),!t[propertyName(s)])return!1}else if(t.keyCode!=n.Keyboard.keys[s])return!1}for(var l=0,c=o;l<c.length;l++){var u=c[l];if(-1==i.indexOf(u)&&t[propertyName(u)])return!1}return!0},System.locked=function(t){return!!t.group&&this.lockedGroups.hasOwnProperty(t.group)},System.keyboardObservers=[],System.languageChangeObservers=[],System.machineChangeObservers=[],System.eventBlock=!1,System.lockedGroups={},System}();i.System=a},{"./Keyboard":5,"./Settings":9}],12:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){function select(t){return document.querySelector(t)}function create(t,e){var i=document.createElement(t);return e&&foreach(e,function(t,e){"click"==t?i.addEventListener("click",e):i[t]=e}),i}function foreach(t,e){for(var i in t)if(t.hasOwnProperty(i)&&!1===e(i,t[i]))break}function clone(t){if(t instanceof Array)return cloneArray(t);if("object"!=typeof t)return t;var e={};for(var i in t)e[i]=clone(t[i]);return e}function cloneArray(t){for(var e=[],i=0,n=t;i<n.length;i++){var r=n[i];e.push(clone(r))}for(var o in t)isNaN(parseInt(o))&&(e[o]=clone(t[o]));return e}function linePath(t,e,i,n){return"M"+t+" "+e+" L"+i+" "+n}t.select=select,t.id=function id(t){return select("#"+t)},t.create=create,t.createSelect=function createSelect(e){for(var i=create("select"),n=0,r=0,o=e;r<o.length;r++){var a=o[r],s=t.create("option",{value:n,innerHTML:a});i.appendChild(s),n++}return i},t.span=function span(t){return create("span",{innerHTML:t})},t.checkbox=function checkbox(t){return void 0===t&&(t=!1),create("input",{checked:t,type:"checkbox"})},t.foreach=foreach,t.clone=clone,t.isSameArray=function isSameArray(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!1;return!0},t.isRightClick=function isRightClick(t){return"which"in t?3==t.which:"button"in t?2==t.button:(console.log("[WARNING] Right click events will not work properly in this browser."),!1)},t.linePath=linePath,t.line=function line(t,e,i,n,r){var o=t.path(linePath(e,i,n,r));return o.attr("stroke","black"),o},t.toRadians=function toRadians(t){return t*Math.PI/180},t.toDegrees=function toDegrees(t){return 180*t/Math.PI},t.rotatePoint=function rotatePoint(t,e,i){var n=Math.sin(i),r=Math.cos(i),o={x:t.x,y:t.y};o.x-=e.x,o.y-=e.y;var a={x:o.x*r-o.y*n,y:o.x*n+o.y*r};return{x:a.x+e.x,y:a.y+e.y}},t.samePoint=function samePoint(t,e){return t&&e&&t.x==e.x&&t.y==e.y},t.async=function async(t){setTimeout(t,0)},t.printShortcut=function printShortcut(t){return t.join(" ").toLowerCase()},t.optionalSymbolValidator=function optionalSymbolValidator(t){return t.length<=1},t.singleSymbolValidator=function singleSymbolValidator(t){return 1==t.length},t.nonEmptyStringValidator=function nonEmptyStringValidator(t){return t.length>0},t.divergence=function divergence(t,e){for(var i=0;t[i]==e[i];)i++;return[t.substr(i),e.substr(i)]},t.dirname=function dirname(t){function reverse(t){return t.split("").reverse().join("")}var e=/[A-Za-z]+\.[A-Za-z0-9]+(.*)/,i=reverse(t).match(e);return null===i?"":reverse(i[1].substr(1))},t.cartesianProduct=function cartesianProduct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join(" x ")},t.assertNever=function assertNever(t){throw Error("Invalid value: "+t)},t.toJSON=function toJSON(t){return{brand:null,data:JSON.stringify(t)}},t.fromJSON=function fromJSON(t){return JSON.parse(t.data)},t.rerouteEdges=function rerouteEdges(e,i,n){e.hasOwnProperty(i)&&(e[n]=e[i],delete e[i]),t.foreach(e,function(t,e){e.hasOwnProperty(i)&&(e[n]=e[i],delete e[i])})}}(i.utils||(i.utils={}))},{}],13:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function Queue(){this.data=[],this.pointer=0}return Queue.prototype.push=function(t){this.data.push(t)},Queue.prototype.front=function(){return this.data[this.pointer]},Queue.prototype.pop=function(){var t=this.front();return this.pointer++,this.pointer>=this.size()/2&&(this.data=this.data.slice(this.pointer),this.pointer=0),t},Queue.prototype.clear=function(){this.data=[],this.pointer=0},Queue.prototype.empty=function(){return 0==this.size()},Queue.prototype.size=function(){return this.data.length-this.pointer},Queue}();i.Queue=n},{}],14:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function UnorderedSet(){this.data={},this.count=0}return UnorderedSet.prototype.insert=function(t){this.contains(t)||this.count++,this.data[t]=!0,this.type=typeof t},UnorderedSet.prototype.erase=function(t){this.contains(t)&&this.count--,delete this.data[t]},UnorderedSet.prototype.contains=function(t){return!!this.data[t]},UnorderedSet.prototype.clear=function(){this.data={},this.count=0},UnorderedSet.prototype.empty=function(){return 0==this.size()},UnorderedSet.prototype.size=function(){return this.count},UnorderedSet.prototype.forEach=function(t){for(var e in this.data)if(this.data.hasOwnProperty(e)){var i=e;if("number"==this.type&&(i=parseFloat(e)),!1===t(i))break}},UnorderedSet.prototype.asList=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},UnorderedSet}();i.UnorderedSet=n},{}],15:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./EdgeInfoPrinter"),r=t("../EdgeUtils"),o=t("./FormalDefinitionRenderer"),a=t("./UIEdge"),s=t("./UIState"),l=t("../Prompt"),c=t("../Settings"),u=t("../SignalEmitter"),h=t("./StateInfoPrinter"),d=t("../System"),p=t("../Utils"),g=function(){function AutomatonRenderer(t,e){this.stateList={},this.edgeList={},this.initialState=null,this.highlightedState=null,this.highlightedEdge=null,this.currentEdge=null,this.edgeMode=!1,this.locked=!1,this.canvas=t,this.node=e,this.formalDefinitionRenderer=new o.FormalDefinitionRenderer(this)}return AutomatonRenderer.prototype.setController=function(t){this.controller=t},AutomatonRenderer.prototype.render=function(){this.bindEvents(),this.bindShortcuts(),this.bindFormalDefinitionListener()},AutomatonRenderer.prototype.onLanguageChange=function(){this.bindFormalDefinitionListener(),this.locked&&(this.recognitionDim(),this.unlock()),this.highlightedState&&this.updateEditableState(this.highlightedState),this.highlightedEdge&&this.updateEditableEdge(this.highlightedEdge)},AutomatonRenderer.prototype.onMachineChange=function(){this.bindFormalDefinitionListener()},AutomatonRenderer.prototype.setStateList=function(t){var e=this;this.clearStates(),p.utils.foreach(t,function(t,i){var n=new s.UIState(i);e.internalCreateState(n),n.initial&&(e.initialState=n),n.render(e.canvas),e.bindStateEvents(n)})},AutomatonRenderer.prototype.setEdgeList=function(t){var e=this;this.clearEdges(),r.EdgeUtils.edgeIteration(t,function(t){e.createEdge(t)}),this.fixAllEdgesCurvature()},AutomatonRenderer.prototype.refresh=function(t){return this.internal(t).render(this.canvas)},AutomatonRenderer.prototype.stateManualCreation=function(){var t=c.Settings.stateRadius,e=c.Settings.stateInitialMarkLength;this.newStateAt(t+e,t)},AutomatonRenderer.prototype.edgeManualCreation=function(){var t=this;this.locked||l.Prompt.simple(c.Strings.EDGE_MANUAL_CREATION,2,function(e){if(t.stateExists(e[0])&&t.stateExists(e[1])){var i=new a.PartialUIEdge;i.origin=t.stateList[e[0]],t.currentEdge=i,t.finishEdge(t.stateList[e[1]])}else alert(c.Strings.ERROR_INVALID_STATE_NAME)})},AutomatonRenderer.prototype.clear=function(){this.clearStates(),this.clearEdges(),this.initialState=null,this.clearSelection()},AutomatonRenderer.prototype.createState=function(t){var e=new s.UIState(t);this.internalCreateState(e),e.initial&&(this.initialState=e),e.render(this.canvas),this.bindStateEvents(e)},AutomatonRenderer.prototype.createEdge=function(t){var e=this.wrapEdge(t);this.internalCreateEdge(e),e.render(this.canvas),this.bindEdgeEvents(e)},AutomatonRenderer.prototype.renameState=function(t,e){var i=this.internal(t);delete this.stateList[i.name],p.utils.rerouteEdges(this.edgeList,i.name,e),i.name=e,this.internalCreateState(i),i.render(this.canvas)},AutomatonRenderer.prototype.toggleInitialFlag=function(t){var e=this.internal(t);e==this.initialState?(e.initial=!1,this.initialState=null):(this.initialState&&(this.initialState.initial=!1,this.initialState.render(this.canvas)),e.initial=!0,this.initialState=e),e.render(this.canvas)},AutomatonRenderer.prototype.toggleFinalFlag=function(t){var e=this.internal(t);e.final=!e.final,e.render(this.canvas)},AutomatonRenderer.prototype.changeTransitionOrigin=function(t,e){var i=this.internal(t);this.internalDeleteEdge(i),i.origin=this.internal(e),this.fixEdgeConsistency(i),i.removed()||(this.internalCreateEdge(i),i.render(this.canvas))},AutomatonRenderer.prototype.changeTransitionTarget=function(t,e){var i=this.internal(t);this.internalDeleteEdge(i),i.target=this.internal(e),this.fixEdgeConsistency(i),i.removed()||(this.internalCreateEdge(i),i.render(this.canvas))},AutomatonRenderer.prototype.changeTransitionData=function(t,e,i,n){var r=this.internal(t);r.dataList[e]=p.utils.clone(i),r.textList[e]=n,r.render(this.canvas)},AutomatonRenderer.prototype.deleteState=function(t){if(this.stateExists(t.name)){var e=this.internal(t);this.removeEdgesOfState(e),e.remove(),delete this.stateList[e.name]}},AutomatonRenderer.prototype.deleteTransition=function(t,e){var i=t.origin,n=t.target,r=this.getEdge(i,n);r&&(r.dataList.splice(e,1),r.textList.splice(e,1),0==r.dataList.length?this.deleteEdge(r):r.render(this.canvas))},AutomatonRenderer.prototype.deleteEdge=function(t){var e=t.origin,i=t.target,n=this.getEdge(e,i);if(n){var r=this.getEdge(i,e);r&&(r.setCurveFlag(!1),r.render(this.canvas)),n.remove(),this.isEdgeSelected(n)&&this.clearSelection(),this.internalDeleteEdge(n)}},AutomatonRenderer.prototype.selectState=function(t){var e=this.internal(t);this.internalSelectState(e)},AutomatonRenderer.prototype.selectEdge=function(t){var e=this.internal(t);this.internalSelectEdge(e)},AutomatonRenderer.prototype.selectTransition=function(t,e){for(var i=this.internal(t),n=0;n<i.dataList.length;n++)if(p.utils.isSameArray(e,i.dataList[n]))return void this.internalSelectEdge(i,n);this.internalSelectEdge(i)},AutomatonRenderer.prototype.recognitionHighlight=function(t){var e=this;p.utils.foreach(this.stateList,function(t,e){e.removePalette()});for(var i=0,n=t;i<n.length;i++){var r=n[i];this.stateList[r].applyPalette(c.Settings.stateRecognitionPalette)}p.utils.foreach(this.stateList,function(t,i){i.render(e.canvas)})},AutomatonRenderer.prototype.recognitionDim=function(){var t=this;p.utils.foreach(this.stateList,function(e,i){i.removePalette(),i.render(t.canvas)}),this.dimSelection()},AutomatonRenderer.prototype.triggerFormalDefinitionChange=function(){this.formalDefinitionCallback()},AutomatonRenderer.prototype.lock=function(){d.System.lockShortcutGroup(c.Settings.canvasShortcutID),this.locked=!0},AutomatonRenderer.prototype.unlock=function(){d.System.unlockShortcutGroup(c.Settings.canvasShortcutID),this.locked=!1},AutomatonRenderer.prototype.getEdge=function(t,e){var i,n;"string"!=typeof t?(i=t.name,n=e.name):(i=t,n=e);var r=this.edgeList;return r.hasOwnProperty(i)&&r[i].hasOwnProperty(n)?r[i][n]:null},AutomatonRenderer.prototype.isEdgeSelected=function(t){return this.highlightedEdge==t},AutomatonRenderer.prototype.internalCreateState=function(t){this.stateList[t.name]=t},AutomatonRenderer.prototype.internalCreateEdge=function(t){var e=t.origin,i=t.target;this.edgeList.hasOwnProperty(e.name)||(this.edgeList[e.name]={}),this.edgeList[e.name][i.name]=t},AutomatonRenderer.prototype.beginEdge=function(t){this.edgeMode=!0,this.currentEdge=new a.PartialUIEdge,this.currentEdge.origin=t},AutomatonRenderer.prototype.adjustEdge=function(t){if(!this.currentEdge)throw Error();this.currentEdge.setVirtualTarget({x:t.pageX-this.node.offsetLeft,y:t.pageY-this.node.offsetTop}),this.currentEdge.render(this.canvas)},AutomatonRenderer.prototype.finishEdge=function(t){var e=this;if(!this.currentEdge)throw Error();this.edgeMode=!1,this.currentEdge.target=t;var i=this.currentEdge,n=i.origin;if(!this.mergeWithParallel(i)){var r=this.getEdge(t,n);r&&(i.setCurveFlag(!0),r.setCurveFlag(!0),r.render(this.canvas)),this.internalSelectEdge(i),i.render(this.canvas),this.edgeTextPrompt(i,function(o,a){i.dataList.push(o),i.textList.push(a),e.dimSelection(),i.remove(),e.controller.createEdge(i),i=e.getEdge(n,t),r&&i.setCurveFlag(!0),e.internalSelectEdge(i),e.currentEdge=null},function(){e.deleteCurrentEdge(),r&&(r.setCurveFlag(!1),r.render(e.canvas))})}},AutomatonRenderer.prototype.clearStates=function(){p.utils.foreach(this.stateList,function(t,e){e.remove()}),this.stateList={}},AutomatonRenderer.prototype.clearEdges=function(){r.EdgeUtils.edgeIteration(this.edgeList,function(t){t.remove()}),this.edgeList={}},AutomatonRenderer.prototype.removeEdgesOfState=function(t){var e=this;r.EdgeUtils.edgeIteration(this.edgeList,function(i){var n=i.origin,r=i.target;n!=t&&r!=t||(i.remove(),e.internalDeleteEdge(i))})},AutomatonRenderer.prototype.internalDeleteEdge=function(t){this.edgeList.hasOwnProperty(t.origin.name)&&delete this.edgeList[t.origin.name][t.target.name]},AutomatonRenderer.prototype.deleteCurrentEdge=function(){this.dimEdge(),this.currentEdge.remove(),this.currentEdge=null},AutomatonRenderer.prototype.internalSelectState=function(t){this.locked||(this.dimSelection(),t.applyPalette(c.Settings.stateHighlightPalette),this.highlightedState=t,t.render(this.canvas),this.updateEditableState(t))},AutomatonRenderer.prototype.internalSelectEdge=function(t,e){void 0===e&&(e=0),this.locked||(this.dimSelection(),t.applyPalette(c.Settings.edgeHighlightPalette),this.highlightedEdge=t,t.render(this.canvas),this.updateEditableEdge(t,e))},AutomatonRenderer.prototype.dimSelection=function(){this.dimState(),this.dimEdge()},AutomatonRenderer.prototype.dimEdge=function(){!this.locked&&this.highlightedEdge&&(this.highlightedEdge.removePalette(),this.highlightedEdge.render(this.canvas),this.highlightedEdge=null,this.unsetSelectedEntityContent())},AutomatonRenderer.prototype.dimState=function(){!this.locked&&this.highlightedState&&(this.highlightedState.removePalette(),this.highlightedState.render(this.canvas),this.highlightedState=null,this.unsetSelectedEntityContent())},AutomatonRenderer.prototype.clearSelection=function(){this.highlightedState=null,this.highlightedEdge=null,this.unsetSelectedEntityContent(),this.edgeMode&&(this.edgeMode=!1,this.currentEdge.remove(),this.currentEdge=null)},AutomatonRenderer.prototype.updateEditableState=function(t){t?u.SignalEmitter.emitSignal({targetID:c.Settings.sidebarSignalID,identifier:"setSelectedEntityContent",data:[this.showEditableState(t)]}):this.unsetSelectedEntityContent()},AutomatonRenderer.prototype.updateEditableEdge=function(t,e){void 0===e&&(e=0),t?u.SignalEmitter.emitSignal({targetID:c.Settings.sidebarSignalID,identifier:"setSelectedEntityContent",data:[this.showEditableEdge(t,e)]}):this.unsetSelectedEntityContent()},AutomatonRenderer.prototype.showEditableState=function(t){this.canvas;var e=this.controller,i=this,n=h.stateInfoPrinter(t),r=function(){var i=new l.Prompt(c.Strings.STATE_RENAME_ACTION);i.addInput({validator:function(t){return t.length<=c.Settings.stateNameMaxLength}}),i.onSuccess(function(i){var n=i[0];if(!e.renameState(t,n))return alert(c.Strings.DUPLICATE_STATE_NAME),void r();$("#entity_name").html(n)}),i.show()};return n.renameButton.addEventListener("click",r),n.toggleInitialButton.addEventListener("click",function(){e.toggleInitialFlag(t);var n=i.initialState==t;$("#entity_initial").html(n?c.Strings.YES:c.Strings.NO)}),n.toggleFinalButton.addEventListener("click",function(){e.toggleFinalFlag(t),$("#entity_final").html(t.final?c.Strings.YES:c.Strings.NO)}),n.deleteButton.addEventListener("click",function(){e.deleteState(t),i.clearSelection(),i.unsetSelectedEntityContent()}),n.container},AutomatonRenderer.prototype.showEditableEdge=function(t,e){void 0===e&&(e=0);this.canvas;var i=this.controller,r=this,o=n.edgeInfoPrinter(t,e);return o.changeOriginButton.addEventListener("click",function(){var e=prompt(c.Strings.EDGE_ENTER_NEW_ORIGIN);if(null!==e)if(r.stateExists(e)){var n=r.stateList[e];i.changeTransitionOrigin(t,n),$("#entity_origin").html(e)}else alert(c.Strings.ERROR_INVALID_STATE_NAME)}),o.changeTargetButton.addEventListener("click",function(){var e=prompt(c.Strings.EDGE_ENTER_NEW_TARGET);if(null!==e){if(!r.stateExists(e))return void alert(c.Strings.ERROR_INVALID_STATE_NAME);var n=r.stateList[e];i.changeTransitionTarget(t,n),$("#entity_target").html(e)}}),o.changeTransitionButton.addEventListener("click",function(){var e=$("#entity_transition_list").get(0).selectedIndex,n=c.Settings.controller().edgePrompt(function(n,o){i.changeTransitionData(t,e,n,o),r.updateEditableEdge(t)});n.setDefaultValues(t.dataList[e]),n.show()}),o.deleteTransitionButton.addEventListener("click",function(){var e=$("#entity_transition_list").get(0).selectedIndex;i.deleteTransition(t,e),t.removed()||r.updateEditableEdge(t)}),o.deleteAllButton.addEventListener("click",function(){i.deleteEdge(t)}),o.container},AutomatonRenderer.prototype.unsetSelectedEntityContent=function(){u.SignalEmitter.emitSignal({targetID:c.Settings.sidebarSignalID,identifier:"unsetSelectedEntityContent",data:[]})},AutomatonRenderer.prototype.bindEvents=function(){var t=this;p.utils.foreach(this.stateList,function(e,i){i.render(t.canvas),t.bindStateEvents(i)}),r.EdgeUtils.edgeIteration(this.edgeList,function(e){t.bindEdgeEvents(e)}),this.bindNodeEvents()},AutomatonRenderer.prototype.bindEdgeEvents=function(t){var e=this;t.addClickHandler(function(){e.selectEdge(t)})},AutomatonRenderer.prototype.bindStateEvents=function(t){var e=this;t.drag(function(){r.EdgeUtils.edgeIteration(e.edgeList,function(t){t.render(e.canvas)})},function(i,n){return!e.locked&&i<=c.Settings.stateDragTolerance?(e.edgeMode?e.finishEdge(t):p.utils.isRightClick(n)?e.beginEdge(t):t==e.highlightedState?e.dimState():e.internalSelectState(t),!1):(e.controller.onStateDrag(t),!0)})},AutomatonRenderer.prototype.bindNodeEvents=function(){var t=this,e=this.node;$(e).dblclick(function(i){if("svg"==i.target.tagName.toLowerCase()){var n=i.pageX-e.offsetLeft,r=i.pageY-e.offsetTop;t.newStateAt(n,r)}}),$(e).contextmenu(function(t){return t.preventDefault(),!1}),$(e).mousemove(function(e){t.edgeMode&&t.adjustEdge(e)})},AutomatonRenderer.prototype.fixAllEdgesCurvature=function(){var t=this;r.EdgeUtils.edgeIteration(this.edgeList,function(e){if(!e.isCurved()){var i=t.getEdge(e.target,e.origin);i&&(e.setCurveFlag(!0),i.setCurveFlag(!0))}})},AutomatonRenderer.prototype.fixEdgeConsistency=function(t){var e=t.origin,i=t.target,n=this.canvas,r=this.getEdge(i,e);r?(r.setCurveFlag(!0),r.render(n),t.setCurveFlag(!0),t.render(n)):(t.setCurveFlag(!1),t.render(n));var o=this.getEdge(e,i);if(o&&o!=t){for(var a=t.dataList,s=t.textList,l=a.length,c=0;c<l;c++)o.dataList.push(a[c]),o.textList.push(s[c]);o.render(n),t.remove(),this.isEdgeSelected(t)&&(this.clearSelection(),this.selectEdge(o))}},AutomatonRenderer.prototype.bindFormalDefinitionListener=function(){var t,e=this,i=this.controller.getFormalDefinitionCallback();this.formalDefinitionCallback=function(){if(i()){t||(t=p.utils.create("div"),u.SignalEmitter.emitSignal({targetID:c.Settings.sidebarSignalID,identifier:"updateFormalDefinition",data:[t]}));var n=c.Settings.controller().formalDefinition(),r=p.utils.create("span");e.formalDefinitionRenderer.render(r,n),t.innerHTML="",t.appendChild(r)}},c.Settings.controller().setEditingCallback(this.formalDefinitionCallback),this.formalDefinitionCallback()},AutomatonRenderer.prototype.stateExists=function(t){return this.stateList.hasOwnProperty(t)},AutomatonRenderer.prototype.edgeTextPrompt=function(t,e,i){var n=c.Settings.controller().edgePrompt(e,i);this.adjustPromptPosition(n,t),n.show()},AutomatonRenderer.prototype.adjustPromptPosition=function(t,e){var i,n,r=e.origin,o=e.target;r==o?(i=r.x+r.getRadius(),n=r.y-r.getRadius()):(i=(r.x+o.x)/2,n=(r.y+o.y)/2),t.setPosition(i,n)},AutomatonRenderer.prototype.mergeWithParallel=function(t){var e=this,i=t.origin,n=t.target,r=this.getEdge(i,n);return!!r&&(this.edgeTextPrompt(r,function(i,n){t.dataList.push(i),t.textList.push(n),r.dataList.push(i),r.textList.push(n),r.render(e.canvas),e.deleteCurrentEdge(),e.selectEdge(r),e.controller.createMergedTransition(t)},function(){return e.deleteCurrentEdge}),!0)},AutomatonRenderer.prototype.newStateAt=function(t,e){var i=this;if(!this.locked){var n=new s.UIState;n.x=t,n.y=e,this.internalSelectState(n),this.bindStateEvents(n);var r=function(){var o=new l.Prompt(c.Strings.STATE_MANUAL_CREATION);o.addInput({validator:p.utils.nonEmptyStringValidator});var a=n.getRadius();o.setPosition(t+a,e-a),o.onSuccess(function(t){var e=t[0];if(i.stateExists(e))return alert(c.Strings.DUPLICATE_STATE_NAME),r();n.name=e,i.dimSelection(),n.remove(),i.controller.createState(n),n=i.stateList[n.name],i.internalSelectState(n)}),o.onAbort(function(){i.highlightedState=null,n.remove(),i.updateEditableState(null)}),o.show()};r()}},AutomatonRenderer.prototype.wrapEdge=function(t){var e=new a.UIEdge;return e.origin=this.internal(t.origin),e.target=this.internal(t.target),e.textList=p.utils.clone(t.textList),e.dataList=p.utils.clone(t.dataList),e},AutomatonRenderer.prototype.internal=function(t){return"state"==t.type?this.stateList[t.name]:this.edgeList[t.origin.name][t.target.name]},AutomatonRenderer.prototype.bindShortcuts=function(){var t=this,e=c.Settings.canvasShortcutID;d.System.bindShortcut(c.Settings.shortcuts.toggleInitial,function(){var e=t.highlightedState;e&&(t.controller.toggleInitialFlag(e),t.updateEditableState(e))},e),d.System.bindShortcut(c.Settings.shortcuts.toggleFinal,function(){var e=t.highlightedState;e&&(t.controller.toggleFinalFlag(e),t.updateEditableState(e))},e),d.System.bindShortcut(c.Settings.shortcuts.dimSelection,function(){t.edgeMode&&(t.edgeMode=!1,t.currentEdge.remove(),t.currentEdge=null),t.dimState(),t.dimEdge()},e),d.System.bindShortcut(c.Settings.shortcuts.deleteEntity,function(){var e=t.highlightedState,i=t.highlightedEdge;e?t.controller.deleteState(e):i&&t.controller.deleteEdge(i),t.clearSelection()},e),d.System.bindShortcut(c.Settings.shortcuts.clearMachine,function(){confirm(c.Strings.CLEAR_CONFIRMATION)&&t.controller.clear()},e),d.System.bindShortcut(c.Settings.shortcuts.left,function(){t.moveStateSelection(function(t,e){return t.x<e.x},function(e,i,n){if(!i)return!0;var r=Math.abs(e.y-n.y),o=Math.abs(i.y-n.y),a=t.selectionThreshold();return r<a?o>=a||e.x>i.x:r<o})},e),d.System.bindShortcut(c.Settings.shortcuts.right,function(){t.moveStateSelection(function(t,e){return t.x>e.x},function(e,i,n){if(!i)return!0;var r=Math.abs(e.y-n.y),o=Math.abs(i.y-n.y),a=t.selectionThreshold();return r<a?o>=a||e.x<i.x:r<o})},e),d.System.bindShortcut(c.Settings.shortcuts.up,function(){t.moveStateSelection(function(t,e){return t.y<e.y},function(e,i,n){if(!i)return!0;var r=Math.abs(e.x-n.x),o=Math.abs(i.x-n.x),a=t.selectionThreshold();return r<a?o>=a||e.y>i.y:r<o})},e),d.System.bindShortcut(c.Settings.shortcuts.down,function(){t.moveStateSelection(function(t,e){return t.y>e.y},function(e,i,n){if(!i)return!0;var r=Math.abs(e.x-n.x),o=Math.abs(i.x-n.x),a=t.selectionThreshold();return r<t.selectionThreshold()?o>=a||e.y<i.y:r<o})},e),d.System.bindShortcut(c.Settings.shortcuts.undo,function(){t.controller.undo()},e),d.System.bindShortcut(c.Settings.shortcuts.redo,function(){t.controller.redo()},e)},AutomatonRenderer.prototype.selectionThreshold=function(){return 2*c.Settings.stateRadius},AutomatonRenderer.prototype.moveStateSelection=function(t,e){var i=this.highlightedState;if(i){var n=null;p.utils.foreach(this.stateList,function(r,o){t(o,i)&&e(o,n,i)&&(n=o)}),n&&this.internalSelectState(n)}},AutomatonRenderer}();i.AutomatonRenderer=g},{"../EdgeUtils":3,"../Prompt":8,"../Settings":9,"../SignalEmitter":10,"../System":11,"../Utils":12,"./EdgeInfoPrinter":16,"./FormalDefinitionRenderer":17,"./StateInfoPrinter":22,"./UIEdge":25,"./UIState":26}],16:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../Settings"),r=t("./Table"),o=t("../Utils");i.edgeInfoPrinter=function(t,e){for(var i=o.utils.create("div"),a=o.utils.create("input",{type:"button",value:n.Strings.CHANGE_PROPERTY}),s=o.utils.create("input",{type:"button",value:n.Strings.CHANGE_PROPERTY}),l=o.utils.create("input",{type:"button",value:n.Strings.CHANGE_PROPERTY}),c=o.utils.create("input",{type:"button",value:n.Strings.DELETE_SELECTED_TRANSITION}),u=o.utils.create("input",{title:o.utils.printShortcut(n.Settings.shortcuts.deleteEntity),type:"button",value:n.Strings.DELETE_ALL_TRANSITIONS}),h=o.utils.create("select",{id:"entity_transition_list"}),d=0,p=0,g=t.textList;p<g.length;p++){var f=g[p],S=o.utils.create("option",{value:d,innerHTML:f});h.appendChild(S),d++}h.selectedIndex=e;var y=new r.Table(3);return y.add(o.utils.span(n.Strings.ORIGIN+":")),y.add(o.utils.create("span",{innerHTML:t.origin.name,className:"property_value",id:"entity_origin"})),y.add(a),y.add(o.utils.span(n.Strings.TARGET+":")),y.add(o.utils.create("span",{innerHTML:t.target.name,className:"property_value",id:"entity_target"})),y.add(s),y.add(o.utils.span(n.Strings.TRANSITIONS+":")),y.add(h),y.add(l),y.add(c,3),y.add(u,3),i.appendChild(y.html()),{container:i,changeOriginButton:a,changeTargetButton:s,changeTransitionButton:l,deleteTransitionButton:c,deleteAllButton:u}}},{"../Settings":9,"../Utils":12,"./Table":23}],17:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../Keyboard"),r=t("../Settings"),o=t("./Table"),a=t("../Utils"),s=function(){function FormalDefinitionRenderer(t){this.automatonRenderer=t}return FormalDefinitionRenderer.prototype.render=function(t,e){var i=e.tupleSequence;t.innerHTML="M = ("+i.join(", ")+")",t.innerHTML+=r.Strings.DEFINITION_WHERE_SUFFIX+"<br>";for(var n=0,o=e.parameterSequence;n<o.length;n++){var s=o[n],l=e.parameterValues[s],c=a.utils.create("span");this.renderParameter(c,s,l),t.appendChild(c),t.appendChild(a.utils.create("br"))}},FormalDefinitionRenderer.prototype.renderParameter=function(t,e,i){var n=typeof i;if("number"==n||"string"==n)t.innerHTML+=e+" = "+i;else if(i instanceof Array)t.innerHTML+=e+" = ",t.innerHTML+="{"+i.join(", ")+"}";else if("undefined"==n){var o="";o+=e+" = ",o+="<span class='none'>",o+=r.Strings.NO_INITIAL_STATE,o+="</span>",t.innerHTML+=o}else i.hasOwnProperty("list")?this.renderTransitionTable(t,e,i):t.innerHTML+="unspecified type"},FormalDefinitionRenderer.prototype.renderTransitionTable=function(t,e,i){this.renderFunctionSignature(t,e,i);var n=i.header,a=i.list,s=i.metadata;if(0==a.length){var l="";return l+="<br>",l+="<span class='none'>",l+=r.Strings.NO_TRANSITIONS,l+="</span>",void(t.innerHTML+=l)}var c=new o.Table(a[0].length);this.addSimpleRow(c,n);var u=c.html();this.renderTransitionTableBody(u,a,s),u.id="transition_table",t.appendChild(u)},FormalDefinitionRenderer.prototype.renderFunctionSignature=function(t,e,i){var r=i.domain,o=i.codomain,a=(i.header,i.list,i.metadata,n.Keyboard.symbols.rightArrow);t.innerHTML+=e+": ",t.innerHTML+=r+" "+a+" "+o},FormalDefinitionRenderer.prototype.addSimpleRow=function(t,e){for(var i=0,n=e;i<n.length;i++){var r=n[i];t.add(a.utils.span(r))}},FormalDefinitionRenderer.prototype.renderTransitionTableBody=function(t,e,i){for(var n=0;n<e.length;n++){for(var r=a.utils.create("tr"),o=0;o<e[n].length;o++){var s=a.utils.create("td");s.innerHTML=e[n][o],r.appendChild(s)}this.bindRowEvents(r,i[n]),t.appendChild(r)}},FormalDefinitionRenderer.prototype.bindRowEvents=function(t,e){var i=this.automatonRenderer,n=null,o=r.Settings.edgeHighlightPalette,a=r.Settings.edgeFormalDefinitionHoverPalette,s=function(){n&&(i.isEdgeSelected(n)?n.applyPalette(o):n.removePalette(),i.refresh(n),n=null)};t.addEventListener("mouseenter",function(){var t=e[0],r=e[1],o=i.getEdge(t,r);o&&(s(),o.applyPalette(a),i.refresh(o),n=o)}),t.addEventListener("mouseleave",s),t.addEventListener("click",function(){n&&(i.selectTransition(n,e[2]),s())})},FormalDefinitionRenderer}();i.FormalDefinitionRenderer=s},{"../Keyboard":5,"../Settings":9,"../Utils":12,"./Table":23}],18:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();i.__esModule=!0;var r=t("./AutomatonRenderer"),o=t("../persistence/JSONHandler"),a=t("../MainController"),s=t("../Memento"),l=t("./Renderer"),c=t("../Settings"),u=t("../Debug"),h=function(t){function Mainbar(){var e=t.call(this)||this;e.automatonRenderer=null,e.canvas=null,e.controller=null;var i=e;return $(window).resize(function(){i.resizeCanvas()}),e}return n(Mainbar,t),Mainbar.prototype.resizeCanvas=function(){var t=this.canvas;if(t){var e=$(this.node);t.setSize(50,50);var i=e.width(),n=e.height()-10;t.setSize(i,n)}},Mainbar.prototype.onBind=function(){this.canvas=Raphael(this.node,0,0),this.resizeCanvas();var t=this.canvas,e=this.node,i=new s.Memento(function(){return c.Settings.undoMaxAmount}),n=new o.JSONHandler;this.automatonRenderer=u.debug(new r.AutomatonRenderer(t,e)),this.controller=u.debug(new a.MainController(this.automatonRenderer,i,n))},Mainbar.prototype.onRender=function(){this.automatonRenderer.render()},Mainbar}(l.Renderer);i.Mainbar=h},{"../Debug":2,"../MainController":6,"../Memento":7,"../Settings":9,"../persistence/JSONHandler":46,"./AutomatonRenderer":15,"./Renderer":20}],19:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();i.__esModule=!0;var r=t("./Renderer"),o=t("../Settings"),a=t("../Utils"),s=function(t){function Menu(e){var i=t.call(this)||this;return i.body=null,i.toggled=!1,i.title=e,i.children=[],i}return n(Menu,t),Menu.prototype.add=function(t){this.children.push(t)},Menu.prototype.clear=function(){this.children=[]},Menu.prototype.clearContent=function(){this.clear(),this.body&&$(this.body).remove()},Menu.prototype.toggle=function(){this.toggled=!this.toggled,this.body&&this.internalToggle()},Menu.prototype.html=function(){return this.body},Menu.prototype.content=function(){return this.body?this.body.querySelector(".content"):null},Menu.prototype.onRender=function(){var t=this.node,e=a.utils.create("div");e.classList.add("menu");var i=a.utils.create("div");i.classList.add("menu_arrow");var n=a.utils.create("div");n.title=o.Strings.MENU_TOGGLE_INSTRUCTIONS,n.classList.add("title"),n.appendChild(i),n.innerHTML+=this.title,e.appendChild(n);var r=a.utils.create("div");r.classList.add("content");for(var s=0,l=this.children;s<l.length;s++){var c=l[s];r.appendChild(c)}e.appendChild(r),t.appendChild(e);var u=this;n.addEventListener("click",function(){$(r).is(":animated")||$(r).slideToggle(o.Settings.menuSlideInterval,function(){u.updateArrow()})}),this.body=e,this.toggled&&this.internalToggle(),this.updateArrow()},Menu.prototype.updateArrow=function(){var t=this.body.querySelector(".menu_arrow");"none"==$(this.content()).css("display")?t.innerHTML="&#x25BA;":t.innerHTML="&#x25BC;"},Menu.prototype.internalToggle=function(){$(this.content()).toggle()},Menu}(r.Renderer);i.Menu=s},{"../Settings":9,"../Utils":12,"./Renderer":20}],20:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function Renderer(){}return Renderer.prototype.bind=function(t){this.node=t,this.onBind()},Renderer.prototype.render=function(){this.node&&this.onRender()},Renderer.prototype.onBind=function(){},Renderer}();i.Renderer=n},{}],21:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();i.__esModule=!0;var r=t("../Keyboard"),o=t("./Menu"),a=t("./Renderer"),s=t("../Settings"),l=t("../Settings"),c=t("../SignalEmitter"),u=t("../System"),h=t("./Table"),d=t("../Utils"),p=function(t){function Sidebar(){var e=t.call(this)||this;return e.otherMenus=[],e.machineButtonMapping={},e.build(),u.System.addLanguageChangeObserver({onLanguageChange:function(){d.utils.id(s.Settings.sidebarID).innerHTML="",e.build(),e.render()}}),u.System.addMachineChangeObserver({onMachineChange:function(){}}),c.SignalEmitter.addSignalObserver(e),e}return n(Sidebar,t),Sidebar.prototype.build=function(){this.mainMenus={settings:new o.Menu(l.Strings.SETTINGS),fileManipulation:new o.Menu(l.Strings.FILE_MENUBAR),machineSelection:new o.Menu(l.Strings.SELECT_MACHINE),formalDefinition:new o.Menu(l.Strings.FORMAL_DEFINITION),selectedEntity:new o.Menu(l.Strings.SELECTED_ENTITY),actionMenu:new o.Menu(l.Strings.ACTION_LIST)},this.buildSettings(),this.buildFileManipulation(),this.buildSelectedEntityArea(),this.buildMachineSelection(),this.buildActionMenu(),this.mainMenus.settings.toggle(),this.contentWrapper=d.utils.create("div",{id:"sidebar_content"}),this.node&&this.onBind()},Sidebar.prototype.receiveSignal=function(t){return t.targetID==s.Settings.sidebarSignalID?{reacted:!0,response:this[t.identifier].apply(this,t.data)}:null},Sidebar.prototype.setSelectedEntityContent=function(t){var e=this.mainMenus.selectedEntity.content();$(e.querySelector(".none")).hide(),this.clearSelectedEntityArea(),e.appendChild(t)},Sidebar.prototype.unsetSelectedEntityContent=function(){var t=this.mainMenus.selectedEntity.content();this.clearSelectedEntityArea(),$(t.querySelector(".none")).show()},Sidebar.prototype.updateFormalDefinition=function(t){var e=this.mainMenus.formalDefinition.content();e.innerHTML="",t&&e.appendChild(t)},Sidebar.prototype.changeMachineType=function(t){c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"clear",data:[]}),this.machineButtonMapping[s.Settings.currentMachine].disabled=!1,this.machineButtonMapping[t].disabled=!0,this.machineButtonMapping[t].blur(),u.System.changeMachine(t),this.loadMachine(t),this.renderDynamicMenus()},Sidebar.prototype.onBind=function(){var t=this.contentWrapper;null===t.parentElement&&this.node.appendChild(t),this.foreachMenu(function(e,i){i.bind(t)});for(var e=0,i=this.otherMenus;e<i.length;e++)i[e].bind(t)},Sidebar.prototype.onRender=function(){this.foreachMenu(function(t,e){e.render()}),this.renderDynamicMenus()},Sidebar.prototype.foreachMenu=function(t){d.utils.foreach(this.mainMenus,function(e,i){t(e,i)})},Sidebar.prototype.clearSelectedEntityArea=function(){for(var t=this.mainMenus.selectedEntity.content();t.children.length>1;)t.removeChild(t.children[t.children.length-1])},Sidebar.prototype.renderDynamicMenus=function(){for(var t=0,e=this.otherMenus;t<e.length;t++)e[t].render()},Sidebar.prototype.loadMachine=function(t){for(var e=0,i=this.otherMenus;e<i.length;e++){var n=(a=i[e]).html();n&&$(n).remove()}this.otherMenus=s.Settings.machines[t].sidebar;for(var r=0,o=this.otherMenus;r<o.length;r++){var a=o[r];a.bind(this.contentWrapper)}},Sidebar.prototype.buildSettings=function(){var t=this.mainMenus.settings;t.clear();var e=new h.Table(2);this.buildLanguageSelection(e),this.buildUndoMaxCountInput(e),this.buildCustomSettings(e),t.add(e.html())},Sidebar.prototype.buildLanguageSelection=function(t){var e=d.utils.create("select"),i=s.Settings.languages,n={},r=0;d.utils.foreach(i,function(t,i){if(i.strings){var o=d.utils.create("option");o.value=r.toString(),o.innerHTML=i.strings.LANGUAGE_NAME,e.appendChild(o),n[r]=t,i==s.Settings.language&&(e.selectedIndex=r),r++}}),e.addEventListener("change",function(t){var e=this,r=e.options[e.selectedIndex],o=parseInt(r.value),a=r.innerHTML;confirm(l.Strings.CHANGE_LANGUAGE.replace("%",a))&&u.System.changeLanguage(i[n[o]])}),t.add(d.utils.span(l.Strings.SYSTEM_LANGUAGE+":")),t.add(e)},Sidebar.prototype.buildUndoMaxCountInput=function(t){var e=d.utils.create("input",{className:"property_value",type:"text",value:s.Settings.undoMaxAmount});e.addEventListener("blur",function(){var t;if(t=this.value.length>3?999:parseInt(this.value),!isNaN(t)){var e=s.Settings.undoMaxAmount,i=e>=0&&t>e,n=e>=0&&t<0,r=!i&&!n;(r=(r=r||i&&confirm(l.Strings.MEMORY_CONSUMPTION_WARNING))||n&&confirm(l.Strings.INFINITE_UNDO_WARNING))&&(s.Settings.undoMaxAmount=t),this.value=s.Settings.undoMaxAmount.toString()}}),e.addEventListener("keyup",function(t){t.keyCode==r.Keyboard.keys.ENTER&&this.blur()}),t.add(d.utils.span(l.Strings.UNDO_MAX_COUNT+":")),t.add(e)},Sidebar.prototype.buildCustomSettings=function(t){for(var e=0,i=s.Settings.getCustomSettings();e<i.length;e++){var n=i[e],r=n[0],o=n[1];t.add(d.utils.span(r+":")),t.add(o)}},Sidebar.prototype.buildFileManipulation=function(){var t=this.mainMenus.fileManipulation;t.clear();var e=d.utils.create("input",{className:"file_manip_btn",type:"button",value:l.Strings.SAVE,click:function(){var t=c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"save",data:[]}),e=new Blob([t],{type:"text/plain; charset=utf-8"});saveAs(e,"file.txt")}});u.System.bindShortcut(s.Settings.shortcuts.save,function(){e.click()}),t.add(e);var i=d.utils.create("input",{id:"file_selector",type:"file"});i.addEventListener("change",function(t){var e=t.target.files[0];if(this.value="",e){var i=new FileReader;i.onload=function(t){c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"load",data:[t.target.result]})},i.readAsText(e)}});var n=d.utils.create("input",{className:"file_manip_btn",type:"button",value:l.Strings.OPEN,click:function(){i.click(),this.blur()}});u.System.bindShortcut(s.Settings.shortcuts.open,function(){n.click()}),t.add(n)},Sidebar.prototype.buildSelectedEntityArea=function(){var t=d.utils.create("span",{className:"none",innerHTML:l.Strings.NO_SELECTED_ENTITY});this.mainMenus.selectedEntity.add(t)},Sidebar.prototype.buildMachineSelection=function(){var t=new h.Table(s.Settings.machineSelectionColumns),e=this;d.utils.foreach(s.Settings.machines,function(i,n){var r=parseInt(i),o=d.utils.create("input");o.classList.add("machine_selection_btn"),o.type="button",o.value=n.name,o.disabled=r==s.Settings.currentMachine,o.addEventListener("click",function(){(c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"empty",data:[]})||confirm(l.Strings.CHANGE_MACHINE_WARNING))&&e.changeMachineType(r)}),t.add(o),e.machineButtonMapping[r]=o}),u.System.bindShortcut(["M"],function(){for(var t=document.querySelectorAll(".machine_selection_btn"),e=0;e<t.length;e++){var i=t[e];if(!i.disabled){i.focus();break}}});var i=this.mainMenus.machineSelection;i.clear(),i.add(t.html()),this.loadMachine(s.Settings.currentMachine)},Sidebar.prototype.buildActionMenu=function(){var t=new h.Table(s.Settings.machineActionColumns),e=d.utils.create("input",{title:l.Strings.CREATE_STATE_INSTRUCTIONS,type:"button",value:l.Strings.CREATE_STATE,click:function(){c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"stateManualCreation",data:[]})}});t.add(e);var i=d.utils.create("input",{title:l.Strings.CREATE_EDGE_INSTRUCTIONS,type:"button",value:l.Strings.CREATE_EDGE,click:function(){c.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"edgeManualCreation",data:[]})}});t.add(i);var n=d.utils.create("input",{title:d.utils.printShortcut(s.Settings.shortcuts.undo),type:"button",value:l.Strings.UNDO,click:function(){u.System.emitKeyEvent(s.Settings.shortcuts.undo)}});t.add(n);var r=d.utils.create("input",{title:d.utils.printShortcut(s.Settings.shortcuts.redo),type:"button",value:l.Strings.REDO,click:function(){u.System.emitKeyEvent(s.Settings.shortcuts.redo)}});t.add(r);var o=d.utils.create("input",{title:d.utils.printShortcut(s.Settings.shortcuts.clearMachine),type:"button",value:l.Strings.CLEAR_MACHINE,click:function(){u.System.emitKeyEvent(s.Settings.shortcuts.clearMachine)}});t.add(o,2);var a=t.html();a.id="machine_actions",this.mainMenus.actionMenu.add(a)},Sidebar}(a.Renderer);i.Sidebar=p},{"../Keyboard":5,"../Settings":9,"../SignalEmitter":10,"../System":11,"../Utils":12,"./Menu":19,"./Renderer":20,"./Table":23}],22:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../Settings"),r=t("./Table"),o=t("../Utils");i.stateInfoPrinter=function(t){var e=o.utils.create("div"),i=o.utils.create("input",{type:"button",value:n.Strings.RENAME_STATE}),a=o.utils.create("input",{type:"button",value:n.Strings.TOGGLE_PROPERTY}),s=o.utils.create("input",{type:"button",value:n.Strings.TOGGLE_PROPERTY}),l=o.utils.create("input",{type:"button",value:n.Strings.DELETE_STATE}),c=new r.Table(3);return c.add(o.utils.span(n.Strings.STATE_NAME+":")),c.add(o.utils.create("span",{innerHTML:t.name,className:"property_value",id:"entity_name"})),c.add(i),c.add(o.utils.span(n.Strings.STATE_IS_INITIAL+":")),c.add(o.utils.create("span",{innerHTML:t.initial?n.Strings.YES:n.Strings.NO,className:"property_value",id:"entity_initial"})),c.add(a),c.add(o.utils.span(n.Strings.STATE_IS_FINAL+":")),c.add(o.utils.create("span",{innerHTML:t.final?n.Strings.YES:n.Strings.NO,className:"property_value",id:"entity_final"})),c.add(s),c.add(l,3),e.appendChild(c.html()),{container:e,renameButton:i,toggleInitialButton:a,toggleFinalButton:s,deleteButton:l}}},{"../Settings":9,"../Utils":12,"./Table":23}],23:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();i.__esModule=!0;var r=t("./Renderer"),o=t("../Utils"),a=function(t){function Table(e){var i=t.call(this)||this;return i.customColspans={},i.numColumns=e,i.children=[],i}return n(Table,t),Table.prototype.add=function(t,e){e&&(this.customColspans[this.children.length]=e),this.children.push(t)},Table.prototype.html=function(){for(var t=o.utils.create("table"),e=0;e<this.children.length;){for(var i=o.utils.create("tr"),n=0;n<this.numColumns;n++){var r=o.utils.create("td");if(e<this.children.length){if(this.customColspans.hasOwnProperty(e+"")){var a=this.customColspans[e];r.colSpan=a,n+=a-1}r.appendChild(this.children[e])}i.appendChild(r),e++}t.appendChild(i)}return t},Table.prototype.onRender=function(){this.node.appendChild(this.html())},Table}(r.Renderer);i.Table=a},{"../Utils":12,"./Renderer":20}],24:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Mainbar"),r=t("../Settings"),o=t("./Sidebar"),a=t("../Utils"),s=function(){function UI(){this.components=[],this.components=[[r.Settings.sidebarID,new o.Sidebar],[r.Settings.mainbarID,new n.Mainbar]],this.bindComponents()}return UI.prototype.render=function(){for(var t=0,e=this.components;t<e.length;t++)e[t][1].render()},UI.prototype.bindComponents=function(){for(var t=0,e=this.components;t<e.length;t++){var i=e[t];i[1].bind(a.utils.id(i[0]))}},UI}();i.UI=s},{"../Settings":9,"../Utils":12,"./Mainbar":18,"./Sidebar":21}],25:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();i.__esModule=!0;var r,o=t("../Settings"),a=t("../Utils");!function(t){t[t.NORMAL=0]="NORMAL",t[t.LOOP=1]="LOOP",t[t.CURVED=2]="CURVED"}(r||(r={}));var s=function(){function PartialUIEdge(){this.textList=[],this.dataList=[],this.type="edge",this.virtualTarget=null,this.curved=!1,this.forcedRender=!1,this.deleted=!1,this.defaultPalette=o.Settings.edgeDefaultPalette,this.palette=this.defaultPalette,this.body=[],this.head=[],this.textContainer=null,this.clickHandlers=[];var t=this;this.clickCallback=function(e){for(var i=0,n=t.clickHandlers;i<n.length;i++)n[i].call(t)}}return PartialUIEdge.prototype.setVirtualTarget=function(t){this.virtualTarget=t},PartialUIEdge.prototype.setCurveFlag=function(t){this.forcedRender=this.forcedRender||this.curved!=t,this.curved=t},PartialUIEdge.prototype.isCurved=function(){return this.curved},PartialUIEdge.prototype.removed=function(){return this.deleted},PartialUIEdge.prototype.addClickHandler=function(t){this.clickHandlers.push(t),this.rebindClickHandlers()},PartialUIEdge.prototype.remove=function(){for(var t=0,e=this.body;t<e.length;t++)(r=e[t]).remove();this.body=[];for(var i=0,n=this.head;i<n.length;i++){var r=n[i];r.remove()}this.head=[],this.textContainer&&(this.textContainer.remove(),this.textContainer=null),this.deleted=!0},PartialUIEdge.prototype.applyPalette=function(t){this.palette=t,this.forcedRender=!0},PartialUIEdge.prototype.removePalette=function(){this.palette=this.defaultPalette,this.forcedRender=!0},PartialUIEdge.prototype.render=function(t){var e=this.origin&&a.utils.samePoint(this.prevOriginPosition,this.origin.getPosition()),i=this.target&&a.utils.samePoint(this.prevTargetPosition,this.target.getPosition());e&&i&&!this.forcedRender||(this.renderBody(t),this.renderHead(t),this.origin&&(this.prevOriginPosition=this.origin.getPosition()),this.target&&(this.prevTargetPosition=this.target.getPosition()),this.forcedRender=!1);for(var n=0,r=this.body;n<r.length;n++)(l=r[n]).attr("stroke",this.palette.strokeColor);for(var o=0,s=this.head;o<s.length;o++){var l=s[o];l.attr("stroke",this.palette.strokeColor)}this.target&&this.renderText(t)},PartialUIEdge.prototype.rebindClickHandlers=function(){for(var t=0,e=this.body;t<e.length;t++){var i=e[t];i.unclick(this.clickCallback),i.click(this.clickCallback)}},PartialUIEdge.prototype.stateCenterOffsets=function(t,e){var i=Math.atan2(e,t),n=Math.sin(i),r=Math.cos(i);return{x:o.Settings.stateRadius*r,y:o.Settings.stateRadius*n}},PartialUIEdge.prototype.renderBody=function(t){var e,i=this.origin.getPosition();if(this.target)e=this.target.getPosition();else if(this.virtualTarget){var n=(e={x:this.virtualTarget.x,y:this.virtualTarget.y}).x-i.x,r=e.y-i.y;e.x=i.x+.98*n,e.y=i.y+.98*r}else e=i;var a=e.x-i.x,s=e.y-i.y,l=o.Settings.stateRadius,c=this.stateCenterOffsets(a,s);a*a+s*s>l*l&&(i.x+=c.x,i.y+=c.y),this.target&&(e.x-=c.x,e.y-=c.y),this.origin==this.target?this.loop(t):this.isCurved()?this.curve(t,i,e):this.normal(t,i,e)},PartialUIEdge.prototype.adjustBody=function(t,e,i){for(;this.body.length>e;)this.body[this.body.length-1].remove(),this.body.pop();for(;this.body.length<e;)this.body.push(a.utils.line(t,0,0,0,0));i!=this.currentEdgeType&&(this.currentEdgeType=i,this.rebindClickHandlers())},PartialUIEdge.prototype.loop=function(t){var e=o.Settings.stateRadius,i=this.origin.getPosition();this.adjustBody(t,4,r.LOOP);for(var n=0,s=this.body;n<s.length;n++)s[n].attr("stroke-width",this.palette.arrowThickness);this.body[0].attr("path",a.utils.linePath(i.x+e,i.y,i.x+2*e,i.y)),this.body[1].attr("path",a.utils.linePath(i.x+2*e,i.y,i.x+2*e,i.y-2*e)),this.body[2].attr("path",a.utils.linePath(i.x+2*e,i.y-2*e,i.x,i.y-2*e)),this.body[3].attr("path",a.utils.linePath(i.x,i.y-2*e,i.x,i.y-e))},PartialUIEdge.prototype.curve=function(t,e,i){var n=i.x-e.x,o=i.y-e.y,s=Math.sqrt(n*n+o*o),l={x:o/s,y:-n/s},c={x:30*l.x,y:30*l.y};this.adjustBody(t,3,r.CURVED);for(var u=0,h=this.body;u<h.length;u++)h[u].attr("stroke-width",this.palette.arrowThickness);this.body[0].attr("path",a.utils.linePath(e.x,e.y,e.x+c.x+.125*n,e.y+c.y+.125*o)),this.body[1].attr("path",a.utils.linePath(e.x+c.x+.125*n,e.y+c.y+.125*o,e.x+c.x+.875*n,e.y+c.y+.875*o)),this.body[2].attr("path",a.utils.linePath(e.x+c.x+.875*n,e.y+c.y+.875*o,i.x,i.y))},PartialUIEdge.prototype.normal=function(t,e,i){this.adjustBody(t,1,r.NORMAL);for(var n=0,o=this.body;n<o.length;n++)o[n].attr("stroke-width",this.palette.arrowThickness);this.body[0].attr("path",a.utils.linePath(e.x,e.y,i.x,i.y))},PartialUIEdge.prototype.renderHead=function(t){if(this.target){var e,i,n,r;if(this.origin==this.target){var s=this.origin.getPosition(),l=o.Settings.stateRadius;e={x:s.x,y:s.y-2*l},i={x:s.x,y:s.y-l},n=0,r=l}else if(this.isCurved()){var c=this.body[2].attr("path");e={x:c[0][1],y:c[0][2]},n=(i={x:c[1][1],y:c[1][2]}).x-e.x,r=i.y-e.y}else{e=this.origin.getPosition(),n=(i=this.target.getPosition()).x-e.x,r=i.y-e.y;var u=this.stateCenterOffsets(n,r);i.x-=u.x,i.y-=u.y,n-=u.x,r-=u.y}var h=this.palette.arrowLength,d=this.palette.arrowAngle,p=1-h/Math.sqrt(n*n+r*r),g={x:e.x+p*n,y:e.y+p*r},f=a.utils.rotatePoint(g,i,d),S=a.utils.rotatePoint(g,i,-d),y=0==this.head.length;if(y&&(this.head.push(a.utils.line(t,0,0,0,0)),this.head.push(a.utils.line(t,0,0,0,0))),this.forcedRender||y)for(var m=0,E=this.head;m<E.length;m++)E[m].attr("stroke-width",this.palette.arrowThickness);this.head[0].attr("path",a.utils.linePath(f.x,f.y,i.x,i.y)),this.head[1].attr("path",a.utils.linePath(S.x,S.y,i.x,i.y))}},PartialUIEdge.prototype.preparedText=function(){return this.textList.join("\n")},PartialUIEdge.prototype.renderText=function(t){var e,i,n=this.origin.getPosition(),r=this.target.getPosition();if(this.origin==this.target){var s=o.Settings.stateRadius;e=n.x+s,i=n.y-2*s}else if(this.isCurved()){var l=this.body[1].attr("path"),c=l[0][1],u=l[0][2];e=(c+l[1][1])/2,i=(u+l[1][2])/2}else e=(n.x+r.x)/2,i=(n.y+r.y)/2;this.textContainer?(this.textContainer.attr("x",e),this.textContainer.attr("y",i),this.textContainer.attr("text",this.preparedText()),this.textContainer.transform("")):(this.textContainer=t.text(e,i,this.preparedText()),this.textContainer.attr("font-family",this.palette.textFontFamily),this.textContainer.attr("font-size",this.palette.textFontSize),this.textContainer.attr("stroke",this.palette.textFontColor),this.textContainer.attr("fill",this.palette.textFontColor));var h=Math.atan2(r.y-n.y,r.x-n.x),d=a.utils.toDegrees(h);(d<-90||d>90)&&(d=(d+180)%360),this.textContainer.rotate(d),i-=.6*this.palette.textFontSize,i-=this.palette.textFontSize*(this.textList.length-1)*.7,this.textContainer.attr("y",i)},PartialUIEdge}();i.PartialUIEdge=s;var l=function(t){function UIEdge(){return null!==t&&t.apply(this,arguments)||this}return n(UIEdge,t),UIEdge}(s);i.UIEdge=l},{"../Settings":9,"../Utils":12}],26:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../Browser"),r=t("../Settings"),o=t("../Utils"),a=function(){function UIState(t){this.initial=!1,this.final=!1,this.name="",this.type="state",this.initialMarkOffsets=[],this.defaultPalette=r.Settings.stateDefaultPalette,this.palette=this.defaultPalette,this.body=null,this.ring=null,this.arrowParts=[],this.textContainer=null,t&&(this.x=t.x,this.y=t.y,this.initial=t.initial,this.final=t.final,this.name=t.name),this.radius=r.Settings.stateRadius}return UIState.prototype.getPosition=function(){return{x:this.x,y:this.y}},UIState.prototype.getRadius=function(){return this.radius},UIState.prototype.applyPalette=function(t){this.palette=t},UIState.prototype.removePalette=function(){this.palette=this.defaultPalette},UIState.prototype.remove=function(){this.body&&(this.body.remove(),this.body=null),this.ring&&(this.ring.remove(),this.ring=null);for(var t=0,e=this.arrowParts;t<e.length;t++)e[t].remove();this.arrowParts=[],this.textContainer&&(this.textContainer.remove(),this.textContainer=null)},UIState.prototype.render=function(t){this.renderBody(t),this.renderInitialMark(t),this.renderFinalMark(t),this.renderText(t)},UIState.prototype.node=function(){return this.body},UIState.prototype.html=function(){return this.body?this.body.node:null},UIState.prototype.drag=function(t,e){if(!this.body)throw Error("Cannot call drag() on a non-rendered state");var i,r=this,o=function(t,e,i){var n=r.getPosition();return this.ox=n.x,this.oy=n.y,{}},a=0;i="chrome"==n.Browser.name?3:4;var s=function(e,n,o,s,l){return r.setVisualPosition(this.ox+e,this.oy+n),0==a&&t.call(this,l),a=(a+1)%i,{}},l=function(i){var n=r.getPosition(),o=n.x-this.ox,a=n.y-this.oy,s=o*o+a*a;return e.call(this,s,i)||0==o&&0==a||r.setVisualPosition(this.ox,this.oy),t.call(this,i),{}};this.body.drag(s,o,l),this.textContainer&&this.textContainer.drag(s,o,l)},UIState.prototype.fillColor=function(){return this.palette.fillColor},UIState.prototype.strokeColor=function(){return this.palette.strokeColor},UIState.prototype.strokeWidth=function(){return this.palette.strokeWidth},UIState.prototype.ringStrokeWidth=function(){return this.palette.ringStrokeWidth},UIState.prototype.renderBody=function(t){this.body?this.body.attr({cx:this.x,cy:this.y}):this.body=t.circle(this.x,this.y,this.radius),this.body.attr("fill",this.fillColor()),this.body.attr("stroke",this.strokeColor()),this.body.attr("stroke-width",this.strokeWidth())},UIState.prototype.updateInitialMarkOffsets=function(){if(!this.initialMarkOffsets.length){var t=r.Settings.stateInitialMarkLength,e=this.x-this.radius,i=this.y,n=r.Settings.stateInitialMarkHeadLength,a=r.Settings.stateInitialMarkAngle,s={x:e-t+(1-n/t)*t,y:i},l={x:e,y:i},c=o.utils.rotatePoint(s,l,a),u=o.utils.rotatePoint(s,l,-a);this.initialMarkOffsets=[{x:c.x-e,y:c.y-i},{x:u.x-e,y:u.y-i}]}},UIState.prototype.renderInitialMark=function(t){if(this.initial){var e=r.Settings.stateInitialMarkLength,i=this.x-this.radius,n=this.y;if(this.arrowParts.length){var a=(p=this.arrowParts)[0],s=p[1],l=p[2];a.attr("path",o.utils.linePath(i-e,n,i,n)),this.updateInitialMarkOffsets();var c=this.initialMarkOffsets[0],u=this.initialMarkOffsets[1];s.attr("path",o.utils.linePath(c.x+i,c.y+n,i,n)),l.attr("path",o.utils.linePath(u.x+i,u.y+n,i,n))}else{if(!t)throw Error();var h=r.Settings.stateInitialMarkColor,d=r.Settings.stateInitialMarkThickness;(a=o.utils.line(t,i-e,n,i,n)).attr("stroke",h),a.attr("stroke-width",d),this.updateInitialMarkOffsets();var c=this.initialMarkOffsets[0],u=this.initialMarkOffsets[1];(s=o.utils.line(t,c.x+i,c.y+n,i,n)).attr("stroke",h),s.attr("stroke-width",d),(l=o.utils.line(t,u.x+i,u.y+n,i,n)).attr("stroke",h),l.attr("stroke-width",d),(p=this.arrowParts).push(a),p.push(s),p.push(l)}}else for(var p=this.arrowParts;p.length;)p[p.length-1].remove(),p.pop()},UIState.prototype.renderFinalMark=function(t){this.final?(this.ring?this.ring.attr({cx:this.x,cy:this.y}):this.ring=t.circle(this.x,this.y,r.Settings.stateRingRadius),this.ring.attr("stroke",this.strokeColor()),this.ring.attr("stroke-width",this.ringStrokeWidth())):this.ring&&(this.ring.remove(),this.ring=null)},UIState.prototype.renderText=function(t){this.textContainer?(this.textContainer.attr("x",this.x),this.textContainer.attr("y",this.y),this.textContainer.attr("text",this.name)):(this.textContainer=t.text(this.x,this.y,this.name),this.textContainer.attr("font-family",r.Settings.stateLabelFontFamily),this.textContainer.attr("font-size",r.Settings.stateLabelFontSize),this.textContainer.attr("stroke",r.Settings.stateLabelFontColor),this.textContainer.attr("fill",r.Settings.stateLabelFontColor))},UIState.prototype.setVisualPosition=function(t,e){this.x=t,this.y=e,this.body.attr({cx:t,cy:e}),this.ring&&this.ring.attr({cx:t,cy:e}),this.initial&&this.renderInitialMark(),this.renderText()},UIState}();i.UIState=a},{"../Browser":1,"../Settings":9,"../Utils":12}],27:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){t.strings={LANGUAGE_NAME:"English",SETTINGS:"System Settings",CHANGE_LANGUAGE:'Change the language to "%"?',SYSTEM_LANGUAGE:"System language",UNDO_MAX_COUNT:"Undo max count",PDA_ACTION_NOTATION:"PDA Action Notation",PDA_TABLE_NOTATION:"Table",PDA_TUPLE_NOTATION:"Tuple",MEMORY_CONSUMPTION_WARNING:"Increasing the history size increases the memory consumption. Do you wish to continue?",INFINITE_UNDO_WARNING:"You are removing the undo limit restriction, which increases memory consumption. Do you wish to continue?",FILE_MENUBAR:"File Manipulation",SAVE:"Save",OPEN:"Open",INVALID_FILE:"Invalid file",DIFFERENT_MACHINE_FILE:"This file contains a machine of a different type. Do you want to change the current machine type?",PROMPT_CONFIRM:"Confirm",PROMPT_CANCEL:"Cancel",SELECTED_ENTITY:"Selected item",NO_SELECTED_ENTITY:"no selected item",ORIGIN:"Origin",TARGET:"Target",TRANSITIONS:"Transitions",STATE_NAME:"Name",STATE_IS_INITIAL:"Is initial",STATE_IS_FINAL:"Is final",RENAME_STATE:"rename",TOGGLE_PROPERTY:"toggle",CHANGE_PROPERTY:"change",DELETE_STATE:"Delete state",DELETE_SELECTED_TRANSITION:"Delete selected transition",DELETE_ALL_TRANSITIONS:"Delete all transitions",YES:"yes",NO:"no",FORMAL_DEFINITION:"Formal Definition",DEFINITION_WHERE_SUFFIX:", where:",NO_INITIAL_STATE:"none",NO_TRANSITIONS:"none",SELECT_MACHINE:"Machine Selection",ACTION_LIST:"Actions",OPERATIONS:"Operations",NO_OPERATIONS:"No supported operations",CREATE_STATE:"Create state",CREATE_EDGE:"Create transition",CLEAR_MACHINE:"Clear machine",CLEAR_CONFIRMATION:"Do you really want to reset this automaton?",UNDO:"Undo",REDO:"Redo",MENU_TOGGLE_INSTRUCTIONS:"click to toggle",CREATE_STATE_INSTRUCTIONS:"double click on target position",CREATE_EDGE_INSTRUCTIONS:"right click on origin then click on target",STATE_MANUAL_CREATION:"Enter the state name:",EDGE_MANUAL_CREATION:"Choose the origin and destination",DUPLICATE_STATE_NAME:"State name already in use",STATE_RENAME_ACTION:"Enter the new state name:",EDGE_ENTER_NEW_ORIGIN:"Enter a new origin:",EDGE_ENTER_NEW_TARGET:"Enter a new target:",FA:"Finite Automaton",PDA:"Pushdown Automaton",LBA:"Linearly Bounded Automaton",FA_ENTER_EDGE_CONTENT:"Enter the transition content (up to 1 character):",FA_ENTER_EDGE_PLACEHOLDER_1:"symbol",PDA_ENTER_EDGE_CONTENT:"Enter the input symbol, stack symbol read and stack symbol(s) written:",PDA_ENTER_EDGE_PLACEHOLDER_1:"read (input)",PDA_ENTER_EDGE_PLACEHOLDER_2:"read (stack)",PDA_ENTER_EDGE_PLACEHOLDER_3:"write",LBA_ENTER_EDGE_CONTENT:"Enter the tape symbol(s) read, tape symbol(s) written and move direction:",LBA_ENTER_EDGE_PLACEHOLDER_1:"read",LBA_ENTER_EDGE_PLACEHOLDER_2:"write",LBA_ENTER_EDGE_PLACEHOLDER_3:"direction",RECOGNITION:"Recognition",MULTIPLE_RECOGNITION:"Multiple recognition",TEST_CASE:"test case",FAST_RECOGNITION:"Fast recognition (R)",STEP_RECOGNITION:"Step-by-step recognition (Enter)",STOP_RECOGNITION:"Stop step-by-step recognition (Esc)",START_MULTIPLE_RECOGNITION:"Multiple recognition",CHANGE_MACHINE_WARNING:"Changing the machine type resets the automaton. Do you wish to continue?",INPUT_ACCEPTED:"accepted",INPUT_REJECTED:"rejected",INPUT_LOOPING:"rejected<br>(looping)",EMPTY:"empty",EMPTY_STACK:"empty stack",ACCEPT_BY_FINAL_STATE:"Accept by final state",ACCEPT_BY_EMPTY_STACK:"Accept by empty stack",NO_RECOGNITION_IN_PROGRESS:"no recognition in progress",STACK_MENUBAR:"Stack content",ACTION_TREE_MENUBAR:"Possible next actions",ACTION_TREE_NO_ACTIONS:"no possible actions",PDA_FIELD_INPUT:"Input",PDA_FIELD_STACK:"Stack",PDA_FIELD_READ_INPUT:"Read (input)",PDA_FIELD_WRITE:"Write",PDA_FIELD_TARGET_STATE:"Target state",ERROR_INVALID_STATE_NAME:"Invalid state name",DETERMINIZATION:"Determinization"}}(i.english||(i.english={}))},{}],28:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){t.strings={LANGUAGE_NAME:"Português",SETTINGS:"Configurações do Sistema",CHANGE_LANGUAGE:'Mudar o idioma para "%"?',SYSTEM_LANGUAGE:"Idioma do sistema",UNDO_MAX_COUNT:"Quantidade de 'desfazer'",PDA_ACTION_NOTATION:"Notação de ação de AP",PDA_TABLE_NOTATION:"Tabela",PDA_TUPLE_NOTATION:"Tupla",MEMORY_CONSUMPTION_WARNING:"Aumentar o tamanho do histórico aumenta o consumo de memória. Deseja continuar?",INFINITE_UNDO_WARNING:"Você está removendo o limite de 'desfazer', o que aumenta o consumo de memória. Deseja continuar?",FILE_MENUBAR:"Manipulação de Arquivos",SAVE:"Salvar",OPEN:"Abrir",INVALID_FILE:"Arquivo inválido",DIFFERENT_MACHINE_FILE:"Este arquivo contém uma máquina de um tipo diferente. Deseja alterar o tipo de máquina atual?",PROMPT_CONFIRM:"Confirmar",PROMPT_CANCEL:"Cancelar",SELECTED_ENTITY:"Item selecionado",NO_SELECTED_ENTITY:"nenhum item selecionado",ORIGIN:"Origem",TARGET:"Destino",TRANSITIONS:"Transições",STATE_NAME:"Nome",STATE_IS_INITIAL:"É inicial",STATE_IS_FINAL:"É final",RENAME_STATE:"renomear",TOGGLE_PROPERTY:"alternar",CHANGE_PROPERTY:"alterar",DELETE_STATE:"Remover estado",DELETE_SELECTED_TRANSITION:"Remover transição selecionada",DELETE_ALL_TRANSITIONS:"Remover todas as transições",YES:"sim",NO:"não",FORMAL_DEFINITION:"Definição Formal",DEFINITION_WHERE_SUFFIX:", onde:",NO_INITIAL_STATE:"nenhum",NO_TRANSITIONS:"nenhuma transição",SELECT_MACHINE:"Seleção de Máquina",ACTION_LIST:"Ações",OPERATIONS:"Operações",NO_OPERATIONS:"Nenhuma operação suportada",CREATE_STATE:"Criar estado",CREATE_EDGE:"Criar transição",CLEAR_MACHINE:"Limpar máquina",CLEAR_CONFIRMATION:"Deseja realmente limpar o autômato?",UNDO:"Desfazer",REDO:"Refazer",MENU_TOGGLE_INSTRUCTIONS:"clique para mostrar/esconder",CREATE_STATE_INSTRUCTIONS:"clique duplo no local alvo",CREATE_EDGE_INSTRUCTIONS:"clique direito na origem e então clique no destino",STATE_MANUAL_CREATION:"Digite o nome do estado:",EDGE_MANUAL_CREATION:"Escolha a origem e o destino:",DUPLICATE_STATE_NAME:"Nome do estado já em uso",STATE_RENAME_ACTION:"Digite o novo nome do estado:",EDGE_ENTER_NEW_ORIGIN:"Digite a nova origem:",EDGE_ENTER_NEW_TARGET:"Digite o novo destino:",FA:"Autômato Finito",PDA:"Autômato de Pilha",LBA:"Autômato Linearmente Limitado",FA_ENTER_EDGE_CONTENT:"Digite o conteúdo da transição (até 1 caractere):",FA_ENTER_EDGE_PLACEHOLDER_1:"símbolo",PDA_ENTER_EDGE_CONTENT:"Digite o símbolo de entrada, símbolo de pilha lido e símbolo(s) de pilha escrito(s)",PDA_ENTER_EDGE_PLACEHOLDER_1:"ler (entrada)",PDA_ENTER_EDGE_PLACEHOLDER_2:"ler (pilha)",PDA_ENTER_EDGE_PLACEHOLDER_3:"escrever",LBA_ENTER_EDGE_CONTENT:"Digite o(s) símbolo(s) de fita lido(s), escrito(s) e a direção do movimento",LBA_ENTER_EDGE_PLACEHOLDER_1:"ler",LBA_ENTER_EDGE_PLACEHOLDER_2:"escrever",LBA_ENTER_EDGE_PLACEHOLDER_3:"direção",RECOGNITION:"Reconhecimento",MULTIPLE_RECOGNITION:"Reconhecimento múltiplo",TEST_CASE:"caso de teste",FAST_RECOGNITION:"Reconhecimento rápido (R)",STEP_RECOGNITION:"Reconhecimento passo-a-passo (Enter)",STOP_RECOGNITION:"Parar reconhecimento passo-a-passo (Esc)",START_MULTIPLE_RECOGNITION:"Reconhecimento múltiplo",CHANGE_MACHINE_WARNING:"Alterar o tipo de máquina reseta o autômato. Deseja continuar?",INPUT_ACCEPTED:"aceito",INPUT_REJECTED:"rejeitado",INPUT_LOOPING:"rejeitado<br>(looping)",EMPTY:"vazio",EMPTY_STACK:"pilha vazia",ACCEPT_BY_FINAL_STATE:"Aceitar por estado final",ACCEPT_BY_EMPTY_STACK:"Aceitar por pilha vazia",NO_RECOGNITION_IN_PROGRESS:"nenhum reconhecimento em andamento",STACK_MENUBAR:"Conteúdo da pilha",ACTION_TREE_MENUBAR:"Possíveis próximas ações",ACTION_TREE_NO_ACTIONS:"nenhuma ação possível",PDA_FIELD_INPUT:"Entrada",PDA_FIELD_STACK:"Pilha",PDA_FIELD_READ_INPUT:"Ler (entrada)",PDA_FIELD_WRITE:"Escrever",PDA_FIELD_TARGET_STATE:"Estado-destino",ERROR_INVALID_STATE_NAME:"Nome de estado inválido",DETERMINIZATION:"Determinização"}}(i.portuguese||(i.portuguese={}))},{}],29:[function(t,e,i){"use strict";function __export(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}i.__esModule=!0,__export(t("../machines/FA/FAController")),__export(t("../machines/PDA/PDAController")),__export(t("../machines/LBA/LBAController"))},{"../machines/FA/FAController":35,"../machines/LBA/LBAController":39,"../machines/PDA/PDAController":43}],30:[function(t,e,i){"use strict";function __export(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}i.__esModule=!0,__export(t("../machines/FA/initializer")),__export(t("../machines/PDA/initializer")),__export(t("../machines/LBA/initializer"))},{"../machines/FA/initializer":36,"../machines/LBA/initializer":41,"../machines/PDA/initializer":44}],31:[function(t,e,i){"use strict";function __export(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}i.__esModule=!0,__export(t("../languages/Portuguese")),__export(t("../languages/English"))},{"../languages/English":27,"../languages/Portuguese":28}],32:[function(t,e,i){"use strict";i.__esModule=!0;!function(t){t[t.FA=0]="FA",t[t.PDA=1]="PDA",t[t.LBA=2]="LBA"}(i.Machine||(i.Machine={}))},{}],33:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../machines/FA/operations/Determinization");i.FA={Determinization:n},i.PDA={},i.LBA={}},{"../machines/FA/operations/Determinization":37}],34:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../datastructures/Queue"),r=t("../../datastructures/UnorderedSet"),o=t("../../Utils"),a=function(){function FA(){this.stateList=[],this.alphabetSet={},this.transitions={},this.epsilonTransitions={},this.initialState=-1,this.finalStates=new r.UnorderedSet,this.numRemovedStates=0,this.currentStates=new r.UnorderedSet}return FA.prototype.addState=function(t){this.stateList.push(t);var e=this.realNumStates()-1;return this.transitions[e]={},this.epsilonTransitions[e]=new r.UnorderedSet,-1==this.initialState&&(this.initialState=e,this.reset()),e},FA.prototype.removeState=function(t){var e=this;o.utils.foreach(this.transitions,function(i,n){var r=parseInt(i);o.utils.foreach(n,function(i){n[i].contains(t)&&e.removeTransition(r,t,i),r==t&&n[i].forEach(function(n){e.removeTransition(t,n,i)})})}),delete this.transitions[t],this.initialState==t&&this.unsetInitialState(),this.currentStates.erase(t),this.finalStates.erase(t),this.stateList[t]=void 0,this.numRemovedStates++},FA.prototype.renameState=function(t,e){this.stateList[t]=e},FA.prototype.addTransition=function(t,e,i){var n=this.transitions[t];""==i?this.epsilonTransitions[t].insert(e):(n.hasOwnProperty(i)||(n[i]=new r.UnorderedSet),n[i].insert(e),this.alphabetSet.hasOwnProperty(i)||(this.alphabetSet[i]=0),this.alphabetSet[i]++)},FA.prototype.removeTransition=function(t,e,i){var n=this.transitions[t];""==i?this.epsilonTransitions[t].erase(e):n.hasOwnProperty(i)&&(n[i].erase(e),n[i].empty()&&delete n[i],this.alphabetSet[i]--,0==this.alphabetSet[i]&&delete this.alphabetSet[i])},FA.prototype.setInitialState=function(t){t<this.realNumStates()&&(this.initialState=t)},FA.prototype.unsetInitialState=function(){this.initialState=-1},FA.prototype.getInitialState=function(){return this.stateList[this.initialState]},FA.prototype.addAcceptingState=function(t){this.finalStates.insert(t)},FA.prototype.removeAcceptingState=function(t){this.finalStates.erase(t)},FA.prototype.getAcceptingStates=function(){var t=[],e=this;return this.finalStates.forEach(function(i){t.push(e.stateList[i])}),t},FA.prototype.getCurrentStates=function(){var t=[],e=this;return this.currentStates.forEach(function(i){t.push(e.stateList[i])}),t},FA.prototype.getStates=function(){return this.stateList.filter(function(t){return void 0!==t})},FA.prototype.transitionIteration=function(t){var e=this,i=this;for(var n in this.transitions)!function(n){if(i.transitions.hasOwnProperty(n)){var r=e.stateList[n],o=i.transitions[n];for(var a in o)!function(i){o.hasOwnProperty(i)&&o[i].forEach(function(n){var o=e.stateList[n];t(r,o,i)})}(a)}}(n);var r=this;for(var n in this.epsilonTransitions)!function(i){if(r.transitions.hasOwnProperty(i)){var n=e.stateList[i];r.epsilonTransitions[i].forEach(function(i){var r=e.stateList[i];t(n,r,"")})}}(n)},FA.prototype.alphabet=function(){var t=[];for(var e in this.alphabetSet)this.alphabetSet.hasOwnProperty(e)&&t.push(e);return t},FA.prototype.read=function(t){var e=new r.UnorderedSet,i=this;this.currentStates.forEach(function(n){var r=i.transition(n,t);r&&r.forEach(function(t){e.insert(t)})}),this.expandSpontaneous(e),this.currentStates=e},FA.prototype.reset=function(){this.currentStates.clear(),-1!=this.initialState&&(this.currentStates.insert(this.initialState),this.expandSpontaneous(this.currentStates))},FA.prototype.clear=function(){this.stateList=[],this.alphabetSet={},this.transitions={},this.epsilonTransitions={},this.unsetInitialState(),this.finalStates.clear(),this.numRemovedStates=0,this.currentStates.clear()},FA.prototype.accepts=function(){var t=!1,e=this;return this.finalStates.forEach(function(i){return!e.currentStates.contains(i)||(t=!0,!1)}),t},FA.prototype.error=function(){return 0==this.currentStates.size()},FA.prototype.numStates=function(){return this.stateList.length-this.numRemovedStates},FA.prototype.realNumStates=function(){return this.stateList.length},FA.prototype.transition=function(t,e){return this.transitions[t][e]},FA.prototype.expandSpontaneous=function(t){var e=new n.Queue;for(t.forEach(function(t){e.push(t)});!e.empty();){var i=e.pop();this.epsilonTransitions[i].forEach(function(i){t.contains(i)||(t.insert(i),e.push(i))})}},FA}();i.FA=a},{"../../Utils":12,"../../datastructures/Queue":13,"../../datastructures/UnorderedSet":14}],35:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./FA"),r=t("../../Keyboard"),o=t("../../Prompt"),a=t("../../Settings"),s=t("../../Utils"),l=function(){function FAController(){this.stateMapping={},this.stepIndex=-1,this.editingCallback=function(){},this.machine=new n.FA}return FAController.prototype.edgePrompt=function(t,e){var i=this,n=new o.Prompt(a.Strings.FA_ENTER_EDGE_CONTENT);return n.addInput({placeholder:a.Strings.FA_ENTER_EDGE_PLACEHOLDER_1,validator:s.utils.optionalSymbolValidator}),n.onSuccess(function(e){t(e,i.edgeDataToText(e))}),n.onAbort(e),n},FAController.prototype.edgeDataToText=function(t){var e=r.Keyboard.symbols.epsilon;return t[0]||e},FAController.prototype.createState=function(t){var e=t.name,i=this.machine.addState(e);this.stateMapping[e]=i,t.initial&&this.machine.setInitialState(i),t.final&&this.machine.addAcceptingState(i),this.editingCallback()},FAController.prototype.createTransition=function(t,e,i){var n=this.index(t),r=this.index(e);this.machine.addTransition(n,r,i[0]),this.editingCallback()},FAController.prototype.changeInitialFlag=function(t){t.initial?this.machine.setInitialState(this.index(t)):this.machine.unsetInitialState(),this.editingCallback()},FAController.prototype.changeFinalFlag=function(t){var e=this.index(t);t.final?this.machine.addAcceptingState(e):this.machine.removeAcceptingState(e),this.editingCallback()},FAController.prototype.renameState=function(t,e){var i=this.index(t);delete this.stateMapping[t.name],this.stateMapping[e]=i,this.machine.renameState(i,e),this.editingCallback()},FAController.prototype.deleteState=function(t){this.machine.removeState(this.index(t)),this.editingCallback()},FAController.prototype.deleteTransition=function(t,e,i){var n=this.index(t),r=this.index(e),o=this.edgeDataToText(i);i[0]||(o=""),this.machine.removeTransition(n,r,o),this.editingCallback()},FAController.prototype.clear=function(){this.machine.clear(),this.editingCallback()},FAController.prototype.fastForward=function(t){this.machine.reset();for(var e=0;e<t.length;e++)this.machine.read(t[e])},FAController.prototype.step=function(t){if(!this.finished(t)){if(-1==this.stepIndex)this.machine.reset();else{var e=t[this.stepIndex];this.machine.read(e)}this.stepIndex++}},FAController.prototype.stop=function(){this.stepIndex=-1},FAController.prototype.reset=function(){this.machine.reset()},FAController.prototype.finished=function(t){return this.stepIndex>=0&&(this.machine.error()||this.stepIndex>=t.length)},FAController.prototype.isStopped=function(){return-1==this.stepIndex},FAController.prototype.stepPosition=function(){return this.stepIndex},FAController.prototype.currentStates=function(){return this.machine.getCurrentStates()},FAController.prototype.accepts=function(){return this.machine.accepts()},FAController.prototype.formalDefinition=function(){var t=this.machine,e=r.Keyboard.symbols.delta,i=r.Keyboard.symbols.sigma,n={tupleSequence:["Q",i,e,"q0","F"],parameterSequence:["Q",i,"q0","F",e],parameterValues:{}},o=n.parameterValues;return o.Q=t.getStates(),o[i]=t.alphabet(),o[e]=this.transitionTable(),o.q0=t.getInitialState(),o.F=t.getAcceptingStates(),n},FAController.prototype.setEditingCallback=function(t){this.editingCallback=t},FAController.prototype.applyOperation=function(t){console.log("[APPLY]",t)},FAController.prototype.index=function(t){return this.stateMapping[t.name]},FAController.prototype.transitionTable=function(){var t=r.Keyboard.symbols,e=t.epsilon,i=["Q",t.sigma+" ∪ {"+e+"}","Q"],n={domain:s.utils.cartesianProduct(i[0],"("+i[1]+")"),codomain:i[2],header:i,list:[],metadata:[]};return this.machine.transitionIteration(function(t,e,i){i=i||r.Keyboard.symbols.epsilon,n.list.push([t,i,e]),n.metadata.push([t,e,[i]])}),n},FAController}();i.FAController=l},{"../../Keyboard":5,"../../Prompt":8,"../../Settings":9,"../../Utils":12,"./FA":34}],36:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../Keyboard"),r=t("../../interface/Menu"),o=t("../../Settings"),a=t("../../SignalEmitter"),s=t("../../System"),l=t("../../Utils"),c=function(){function initFA(){this.shortcutGroup="FA",this.boundShortcuts=!1}return initFA.prototype.init=function(){var t=[],e=new r.Menu(o.Strings.RECOGNITION),i=[];this.buildTestCaseInput(i),this.buildRecognitionControls(i),this.buildRecognitionProgress(i),this.addRows(i,e),t.push(e);var n=new r.Menu(o.Strings.MULTIPLE_RECOGNITION);i=[],this.buildMultipleRecognition(i),this.addRows(i,n),t.push(n),this.bindRecognitionEvents(),o.Settings.machines[o.Settings.Machine.FA].sidebar=t},initFA.prototype.onEnter=function(){this.bindShortcuts(),s.System.unlockShortcutGroup(this.shortcutGroup)},initFA.prototype.onExit=function(){this.stopRecognition.click(),s.System.lockShortcutGroup(this.shortcutGroup)},initFA.prototype.addRows=function(t,e){for(var i=0,n=t;i<n.length;i++){for(var r=n[i],o=l.utils.create("div",{className:"row"}),a=0,s=r;a<s.length;a++){var c=s[a];o.appendChild(c)}e.add(o)}},initFA.prototype.testCase=function(){return this.testCaseInput.value},initFA.prototype.buildTestCaseInput=function(t){this.testCaseInput=l.utils.create("input",{type:"text",placeholder:o.Strings.TEST_CASE}),t.push([this.testCaseInput])},initFA.prototype.highlightCurrentStates=function(){var t=o.Settings.controller().currentStates();a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"recognitionHighlight",data:[t]})},initFA.prototype.buildRecognitionControls=function(t){var e=o.Settings.disabledButtonClass;this.fastRecognition=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("fastforward.svg"),title:o.Strings.FAST_RECOGNITION}),this.stopRecognition=l.utils.create("img",{className:"image_button "+e,src:o.Settings.getResourcePath("stop.svg"),title:o.Strings.STOP_RECOGNITION}),this.stepRecognition=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("play.svg"),title:o.Strings.STEP_RECOGNITION}),t.push([this.fastRecognition,this.stepRecognition,this.stopRecognition])},initFA.prototype.buildRecognitionProgress=function(t){this.progressContainer=l.utils.create("div",{id:"recognition_progress"}),this.progressContainer.style.display="none",t.push([this.progressContainer])},initFA.prototype.buildMultipleRecognition=function(t){this.multipleCaseArea=l.utils.create("textarea"),this.multipleCaseArea.rows=o.Settings.multRecognitionAreaRows,this.multipleCaseArea.cols=o.Settings.multRecognitionAreaCols,this.multipleCaseResults=l.utils.create("div");var e=l.utils.create("div",{id:"multiple_recognition"});e.appendChild(this.multipleCaseArea),e.appendChild(this.multipleCaseResults),t.push([e]),this.multipleCaseButton=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("play.svg"),title:o.Strings.START_MULTIPLE_RECOGNITION}),t.push([this.multipleCaseButton])},initFA.prototype.showAcceptanceStatus=function(){o.Settings.controller().accepts()?(this.progressContainer.style.color=o.Settings.acceptedTestCaseColor,this.progressContainer.innerHTML=o.Strings.INPUT_ACCEPTED):(this.progressContainer.style.color=o.Settings.rejectedTestCaseColor,this.progressContainer.innerHTML=o.Strings.INPUT_REJECTED)},initFA.prototype.unlockAutomaton=function(){a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"unlock",data:[]})},initFA.prototype.bindRecognitionEvents=function(){var t=o.Settings.disabledButtonClass,e=!0,i=!0,n=!1,r=this,s=l.utils.create("span",{className:"parsed_input"}),c=l.utils.create("span",{className:"remaining_input"}),u=!1,h=function(i){e=i,r.fastRecognition.classList[i?"remove":"add"](t)},d=function(e){i=e,r.stepRecognition.classList[e?"remove":"add"](t)},p=function(e){n=e,r.stopRecognition.classList[e?"remove":"add"](t)};this.fastRecognition.addEventListener("click",function(){if(e){var t=r.testCase();o.Settings.controller().fastForward(t),r.highlightCurrentStates(),r.progressContainer.style.display="",u=!1,r.showAcceptanceStatus(),h(!1),d(!1),p(!0),r.testCaseInput.disabled=!0}}),this.stopRecognition.addEventListener("click",function(){n&&(o.Settings.controller().stop(),a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"recognitionDim",data:[]}),r.unlockAutomaton(),r.progressContainer.style.color="black",r.progressContainer.style.display="none",h(!0),d(!0),p(!1),r.testCaseInput.disabled=!1)}),this.stepRecognition.addEventListener("click",function(){if(i){h(!1),p(!0),r.testCaseInput.disabled=!0;var t=r.testCase(),e=o.Settings.controller();e.isStopped()&&(a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"lock",data:[]}),r.progressContainer.style.display="");var n=e.finished(t);if(n||(e.step(t),r.highlightCurrentStates(),n=e.finished(t)),n)u=!1,r.showAcceptanceStatus(),d(!1),r.unlockAutomaton();else{var l=e.stepPosition();u||(r.progressContainer.innerHTML="",r.progressContainer.appendChild(s),r.progressContainer.appendChild(c),u=!0),s.innerHTML=t.substr(0,l),c.innerHTML=t.substr(l)}}}),this.multipleCaseButton.addEventListener("click",function(){var t=r.multipleCaseArea.value.split("\n"),e=o.Settings.controller();r.multipleCaseResults.innerHTML="";for(var i=0,n=t;i<n.length;i++){var a=n[i];e.fastForward(a);var s=l.utils.create("span");e.accepts()?(s.style.color=o.Settings.acceptedTestCaseColor,s.innerHTML=o.Strings.INPUT_ACCEPTED):(s.style.color=o.Settings.rejectedTestCaseColor,s.innerHTML=o.Strings.INPUT_REJECTED),r.multipleCaseResults.appendChild(s)}})},initFA.prototype.bindShortcuts=function(){var t=this;this.boundShortcuts||(s.System.bindShortcut(o.Settings.shortcuts.focusTestCase,function(){t.testCaseInput.focus()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.fastForward,function(){t.fastRecognition.click()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.step,function(){t.stepRecognition.click()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.stop,function(){t.stopRecognition.click()},this.shortcutGroup),this.boundShortcuts=!0),this.testCaseInput.addEventListener("keydown",function(e){var i=o.Settings.shortcuts.dimTestCase[0];e.keyCode==n.Keyboard.keys[i]&&t.testCaseInput.blur()})},initFA}();i.initFA=c},{"../../Keyboard":5,"../../Settings":9,"../../SignalEmitter":10,"../../System":11,"../../Utils":12,"../../interface/Menu":19}],37:[function(t,e,i){"use strict";i.__esModule=!0,i.name="Determinization",i.command=function command(t){return t.addState("[what]"),t}},{}],38:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../datastructures/UnorderedSet"),r=t("../../Utils"),o=t("./helpers/Tape"),a=function(){function LBA(){this.stateList={},this.inputAlphabet={},this.tapeAlphabet={},this.transitions={},this.initialState=-1,this.finalStates=new n.UnorderedSet,this.currentState=null,this.calculationSteps=0,this.inputLength=0,this.actionTree=[],this.halt=!0,this.accepting=!1,this.lastUsedIndex=-1,this.tape=new o.Tape("_")}return LBA.prototype.addState=function(t){var e=this.nextIndex();return this.stateList[e]=t,-1==this.initialState&&(this.initialState=e,this.reset()),e},LBA.prototype.removeState=function(t){this.removeEdgesOfState(t),this.initialState===t&&this.unsetInitialState(),this.finalStates.erase(t),delete this.stateList[t],delete this.transitions[t]},LBA.prototype.renameState=function(t,e){this.stateList[t]=e},LBA.prototype.addTransition=function(t,e,i){var n=i[0],r=i[1],o=this.plainTextToDirection(i[2]),a=this.transitions;a.hasOwnProperty(t.toString())||(a[t]={}),a[t].hasOwnProperty(n)||(a[t][n]=[]),a[t][n].push({state:e,tapeSymbol:r,direction:o}),this.isInputSymbol(n)&&this.addInputSymbol(n),this.isInputSymbol(r)&&this.addInputSymbol(r),this.addTapeSymbol(n),this.addTapeSymbol(r)},LBA.prototype.removeTransition=function(t,e,i){var n=i[0],r=i[1],o=this.plainTextToDirection(i[2]),a=this.transitions;if(a.hasOwnProperty(t.toString())&&a[t].hasOwnProperty(n))for(var s=a[t][n],l=0;l<s.length;){var c=s[l],u=c.state==e;(u=(u=u&&c.tapeSymbol==r)&&c.direction==o)?this.uncheckedRemoveTransition(t,n,l):l++}},LBA.prototype.setInitialState=function(t){this.stateList.hasOwnProperty(t.toString())&&(this.initialState=t)},LBA.prototype.unsetInitialState=function(){this.initialState=-1},LBA.prototype.getInitialState=function(){return this.stateList[this.initialState]},LBA.prototype.addAcceptingState=function(t){this.finalStates.insert(t)},LBA.prototype.removeAcceptingState=function(t){this.finalStates.erase(t)},LBA.prototype.getAcceptingStates=function(){var t=this,e=[];return this.finalStates.forEach(function(i){e.push(t.stateList[i])}),e},LBA.prototype.getCurrentState=function(){if(null!==this.currentState)return this.stateList[this.currentState]},LBA.prototype.getStates=function(){var t=[];return r.utils.foreach(this.stateList,function(e,i){t.push(i)}),t},LBA.prototype.transitionIteration=function(t){var e=this;r.utils.foreach(this.transitions,function(i,n){var o=e.stateList[parseInt(i)];r.utils.foreach(n,function(i,n){for(var r=0,a=n;r<a.length;r++){var s=a[r],l={state:e.stateList[s.state],tapeSymbol:s.tapeSymbol,direction:s.direction};t(o,l,i)}})})},LBA.prototype.getInputAlphabet=function(){var t=[];return r.utils.foreach(this.inputAlphabet,function(e){t.push(e)}),t},LBA.prototype.getTapeAlphabet=function(){var t=[];return r.utils.foreach(this.tapeAlphabet,function(e){t.push(e)}),t},LBA.prototype.setTapeContent=function(t){this.tape.setContent(t),this.calculationSteps=0,this.inputLength=t.length,this.actionTree=this.getPossibleActions(),this.halt=!1,this.accepting=!1},LBA.prototype.getTapeContent=function(){return this.tape.toArray()},LBA.prototype.getHeadPosition=function(){return this.tape.getHeadPosition()},LBA.prototype.getActionTree=function(){for(var t=[],e=0,i=this.actionTree;e<i.length;e++){var n=i[e],r=new o.Tape;r.load(n.currentTape),t.push({currentTape:r,calculationSteps:n.calculationSteps,tapeWrite:n.tapeWrite,moveDirection:n.moveDirection,stepIndex:n.stepIndex,targetState:this.stateList[n.targetState]})}return t},LBA.prototype.read=function(){if(!this.halted()){var t=this.actionTree,e=!0;if(t.length>0){var i=t[t.length-1];this.processAction(i),this.actionTree.pop(),this.halt=!1;var n=this.getPossibleActions();(r=this.actionTree).push.apply(r,n),e=0==n.length&&this.accepts()}this.exhausted()&&(e=!0),e&&(this.halt=!0,this.accepts()?this.accepting=!0:this.currentState=null);var r}},LBA.prototype.halted=function(){return this.halt},LBA.prototype.reset=function(){-1==this.initialState?this.currentState=null:this.currentState=this.initialState,this.tape.resetHead(),this.calculationSteps=0,this.halt=!0,this.accepting=!1},LBA.prototype.clear=function(){this.stateList={},this.inputAlphabet={},this.tapeAlphabet={},this.transitions={},this.unsetInitialState(),this.finalStates.clear(),this.currentState=null,this.tape.setContent([]),this.calculationSteps=0,this.inputLength=0,this.halt=!0,this.accepting=!1,this.lastUsedIndex=-1},LBA.prototype.accepts=function(){if(this.accepting)return!0;if(null===this.currentState)return!1;var t=this.finalStates.contains(this.currentState);return t=t&&this.tape.pointsAfterTape()},LBA.prototype.error=function(){return null===this.currentState},LBA.prototype.exhausted=function(){if(this.accepts())return!1;var t=Object.keys(this.stateList).length,e=this.inputLength,i=Object.keys(this.tapeAlphabet).length;return this.calculationSteps>t*e*Math.pow(i,e)},LBA.prototype.nextIndex=function(){return++this.lastUsedIndex},LBA.prototype.removeEdgesOfState=function(t){var e=this;r.utils.foreach(this.transitions,function(i,n){var o=parseInt(i);r.utils.foreach(n,function(i,n){o==t&&e.uncheckedRemoveTransition(o,i);for(var r=0;r<n.length;)n[r].state==t?e.uncheckedRemoveTransition(o,i,r):r++})})},LBA.prototype.uncheckedRemoveTransition=function(t,e,i){for(var n=this.transitions[t][e],r=0;r<n.length;)if(void 0===i||r==i){this.isInputSymbol(e)&&this.removeInputSymbol(e);var o=n[r].tapeSymbol;this.isInputSymbol(o)&&this.removeInputSymbol(o),this.removeTapeSymbol(e),this.removeTapeSymbol(o),n.splice(r,1)}else r++;void 0===i&&delete this.transitions[t][e]},LBA.prototype.processAction=function(t){this.tape.load(t.currentTape),this.calculationSteps=t.calculationSteps,this.currentState=t.targetState,this.tape.write(t.tapeWrite),this.tape.moveHead(t.moveDirection),this.calculationSteps++},LBA.prototype.getPossibleActions=function(){var t=[],e=this.tape.read();return void 0!==e?this.handleInputSymbol(e,t):this.handleInputSymbol("_",t),this.handleInputSymbol("",t),t},LBA.prototype.handleInputSymbol=function(t,e){if(null!==this.currentState&&this.transitions.hasOwnProperty(this.currentState.toString())){var i=this.transitions[this.currentState];if(i.hasOwnProperty(t))for(var n=0,r=i[t];n<r.length;n++){var o=r[n];e.push({currentTape:this.tape.save(),calculationSteps:this.calculationSteps,tapeWrite:o.tapeSymbol,moveDirection:o.direction,stepIndex:this.stepIndex,targetState:o.state})}}},LBA.prototype.isInputSymbol=function(t){return/[a-z0-9]/.test(t)},LBA.prototype.plainTextToDirection=function(t){return"<"==t?0:1},LBA.prototype.addSymbol=function(t,e){this[t].hasOwnProperty(e)||(this[t][e]=0),this[t][e]++},LBA.prototype.addInputSymbol=function(t){this.addSymbol("inputAlphabet",t)},LBA.prototype.addTapeSymbol=function(t){this.addSymbol("tapeAlphabet",t)},LBA.prototype.removeSymbol=function(t,e){this[t][e]--,0==this[t][e]&&delete this[t][e]},LBA.prototype.removeInputSymbol=function(t){this.removeSymbol("inputAlphabet",t)},LBA.prototype.removeTapeSymbol=function(t){this.removeSymbol("tapeAlphabet",t)},LBA}();i.LBA=a},{"../../Utils":12,"../../datastructures/UnorderedSet":14,"./helpers/Tape":40}],39:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../Keyboard"),r=t("./LBA"),o=t("../../Prompt"),a=t("../../Settings"),s=t("../../Utils"),l=t("../../Debug"),c=function(){function LBAController(){this.stateMapping={},this.stepIndex=-1,this.editingCallback=function(){},this.machine=l.debug(new r.LBA)}return LBAController.prototype.edgePrompt=function(t,e){var i=this,r=new o.Prompt(a.Strings.LBA_ENTER_EDGE_CONTENT);return r.addInput({placeholder:a.Strings.LBA_ENTER_EDGE_PLACEHOLDER_1,validator:s.utils.singleSymbolValidator}),r.addInput({placeholder:a.Strings.LBA_ENTER_EDGE_PLACEHOLDER_2,validator:s.utils.singleSymbolValidator}),r.addInput({initializer:function(){var t=s.utils.create("select");return t.appendChild(s.utils.create("option",{innerHTML:n.Keyboard.symbols.leftArrow,value:"<"})),t.appendChild(s.utils.create("option",{innerHTML:n.Keyboard.symbols.rightArrow,value:">"})),t}}),r.onSuccess(function(e){t(e,i.edgeDataToText(e))}),r.onAbort(e),r},LBAController.prototype.edgeDataToText=function(t){var e=n.Keyboard.symbols,i=e.epsilon,r=[t[0]||i,t[1]||i,"<"==t[2]?e.leftArrow:e.rightArrow];return r[0]+", "+r[1]+", "+r[2]},LBAController.prototype.createState=function(t){var e=t.name,i=this.machine.addState(e);this.stateMapping[e]=i,t.initial&&this.machine.setInitialState(i),t.final&&this.machine.addAcceptingState(i),this.editingCallback()},LBAController.prototype.createTransition=function(t,e,i){var n=this.index(t),r=this.index(e);this.machine.addTransition(n,r,i),this.editingCallback()},LBAController.prototype.changeInitialFlag=function(t){t.initial?this.machine.setInitialState(this.index(t)):this.machine.unsetInitialState(),this.editingCallback()},LBAController.prototype.changeFinalFlag=function(t){var e=this.index(t);t.final?this.machine.addAcceptingState(e):this.machine.removeAcceptingState(e),this.editingCallback()},LBAController.prototype.renameState=function(t,e){var i=this.index(t);delete this.stateMapping[t.name],this.stateMapping[e]=i,this.machine.renameState(i,e),this.editingCallback()},LBAController.prototype.deleteState=function(t){this.machine.removeState(this.index(t)),this.editingCallback()},LBAController.prototype.deleteTransition=function(t,e,i){var n=this.index(t),r=this.index(e);this.machine.removeTransition(n,r,i),this.editingCallback()},LBAController.prototype.clear=function(){this.machine.clear(),this.editingCallback()},LBAController.prototype.fastForward=function(t){for(this.machine.reset(),this.machine.setTapeContent(t.split(""));!this.machine.halted();)this.machine.read()},LBAController.prototype.step=function(t){this.finished(t)||(-1==this.stepIndex?(this.machine.reset(),this.machine.setTapeContent(t.split(""))):this.machine.read(),this.stepIndex++)},LBAController.prototype.stop=function(){this.stepIndex=-1},LBAController.prototype.reset=function(){this.machine.reset()},LBAController.prototype.finished=function(t){return this.stepIndex>=0&&this.machine.halted()},LBAController.prototype.isStopped=function(){return-1==this.stepIndex},LBAController.prototype.stepPosition=function(){return this.stepIndex},LBAController.prototype.getTapeContent=function(){return this.machine.getTapeContent()},LBAController.prototype.getHeadPosition=function(){return this.machine.getHeadPosition()},LBAController.prototype.getActionTree=function(){return this.machine.getActionTree()},LBAController.prototype.currentStates=function(){var t=this.machine.getCurrentState(),e=[];return this.machine.error()||e.push(t),e},LBAController.prototype.accepts=function(){return this.machine.accepts()},LBAController.prototype.exhausted=function(){return this.machine.exhausted()},LBAController.prototype.formalDefinition=function(){var t=this.machine,e=n.Keyboard.symbols.delta,i=n.Keyboard.symbols.gamma,r=n.Keyboard.symbols.sigma,o={tupleSequence:["Q",r,i,e,"q0","B","F"],parameterSequence:["Q",r,i,"q0","B","F",e],parameterValues:{}},a=o.parameterValues;return a.Q=t.getStates(),a[r]=t.getInputAlphabet(),a[i]=t.getTapeAlphabet(),a[e]=this.transitionTable(),a.q0=t.getInitialState(),a.B="_",a.F=t.getAcceptingStates(),o},LBAController.prototype.setEditingCallback=function(t){this.editingCallback=t},LBAController.prototype.applyOperation=function(t){},LBAController.prototype.index=function(t){return this.stateMapping[t.name]},LBAController.prototype.transitionTable=function(){var t=n.Keyboard.symbols,e=t.gamma,i=t.leftArrow,r=t.rightArrow,o=["Q",e,"Q",e,"{"+i+","+r+"}"],a={domain:s.utils.cartesianProduct(o[0],o[1]),codomain:s.utils.cartesianProduct(o[2],o[3],o[4]),header:o,list:[],metadata:[]},l=[i,r],c=["<",">"];return this.machine.transitionIteration(function(t,e,i){a.list.push([t,i,e.state,e.tapeSymbol,l[e.direction]]),a.metadata.push([t,e.state,[i,e.tapeSymbol,c[e.direction]]])}),a},LBAController}();i.LBAController=c},{"../../Debug":2,"../../Keyboard":5,"../../Prompt":8,"../../Settings":9,"../../Utils":12,"./LBA":38}],40:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../../Utils"),r=(a={},a[0]=-1,a[1]=1,a),o=function(){function Tape(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.content={},this.headPosition=0,this.lowIndex=0,this.highIndex=0,this.boundarySymbols=[],this.boundarySymbols=t}return Tape.prototype.moveHead=function(t){this.isBeyondBoundaryMove(t)||(this.headPosition+=r[t])},Tape.prototype.resetHead=function(){this.headPosition=0},Tape.prototype.read=function(){return this.content[this.headPosition]},Tape.prototype.write=function(t){this.isBoundarySymbol(t)||(this.content[this.headPosition]=t,this.headPosition<this.lowIndex&&(this.lowIndex=this.headPosition),this.headPosition>this.highIndex&&(this.highIndex=this.headPosition))},Tape.prototype.setContent=function(t){for(var e={},i=0;i<t.length;i++)e[i]=t[i];this.content=e,this.headPosition=0,this.lowIndex=0,this.highIndex=t.length-1},Tape.prototype.pointsBeforeTape=function(){return this.headPosition<this.lowIndex},Tape.prototype.pointsAfterTape=function(){return this.headPosition>this.highIndex},Tape.prototype.pointsOutsideTape=function(){return this.pointsBeforeTape()||this.pointsAfterTape()},Tape.prototype.toArray=function(){for(var t=[],e=this.lowIndex;e<=this.highIndex;e++)this.content.hasOwnProperty(e.toString())?t.push(this.content[e]):t.push("");return t},Tape.prototype.getHeadPosition=function(){return this.headPosition-this.lowIndex},Tape.prototype.save=function(){return n.utils.toJSON({content:this.content,headPosition:this.headPosition,lowIndex:this.lowIndex,highIndex:this.highIndex,boundarySymbols:this.boundarySymbols})},Tape.prototype.load=function(t){var e=n.utils.fromJSON(t);this.content=e.content,this.headPosition=e.headPosition,this.lowIndex=e.lowIndex,this.highIndex=e.highIndex,this.boundarySymbols=e.boundarySymbols},Tape.prototype.isBeyondBoundaryMove=function(t){var e=this.headPosition+r[t];return e<this.lowIndex-1||e>this.highIndex+1},Tape.prototype.isBoundarySymbol=function(t){for(var e=0,i=this.boundarySymbols;e<i.length;e++)if(t==i[e])return!0;return!1},Tape}();i.Tape=o;var a},{"../../../Utils":12}],41:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../Keyboard"),r=t("../../interface/Menu"),o=t("../../Settings"),a=t("../../SignalEmitter"),s=t("../../System"),l=t("../../Utils"),c=function(){function initLBA(){this.shortcutGroup="LBA",this.boundShortcuts=!1}return initLBA.prototype.init=function(){var t=[this.buildRecognitionMenu(),this.buildActionTreeMenu(),this.buildMultipleRecognitionMenu()];this.bindRecognitionEvents(),o.Settings.machines[o.Settings.Machine.LBA].sidebar=t},initLBA.prototype.buildRecognitionMenu=function(){var t=new r.Menu(o.Strings.RECOGNITION),e=[];return this.buildTestCaseInput(e),this.buildRecognitionControls(e),this.buildTape(e),this.buildRecognitionProgress(e),this.addRows(e,t),t},initLBA.prototype.buildActionTreeMenu=function(){var t=new r.Menu(o.Strings.ACTION_TREE_MENUBAR),e=[];return this.buildActionTree(e),this.addRows(e,t),t},initLBA.prototype.buildMultipleRecognitionMenu=function(){var t=new r.Menu(o.Strings.MULTIPLE_RECOGNITION),e=[];return this.buildMultipleRecognition(e),this.addRows(e,t),t},initLBA.prototype.onEnter=function(){this.bindShortcuts(),s.System.unlockShortcutGroup(this.shortcutGroup)},initLBA.prototype.onExit=function(){this.stopRecognition.click(),s.System.lockShortcutGroup(this.shortcutGroup)},initLBA.prototype.addRows=function(t,e){for(var i=0,n=t;i<n.length;i++){for(var r=n[i],o=l.utils.create("div",{className:"row"}),a=0,s=r;a<s.length;a++){var c=s[a];o.appendChild(c)}e.add(o)}},initLBA.prototype.testCase=function(){return this.testCaseInput.value},initLBA.prototype.buildTestCaseInput=function(t){var e=l.utils.create("input",{type:"text",placeholder:o.Strings.TEST_CASE});t.push([e]),this.testCaseInput=e},initLBA.prototype.highlightCurrentStates=function(){var t=o.Settings.controller().currentStates();a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"recognitionHighlight",data:[t]})},initLBA.prototype.buildRecognitionControls=function(t){var e=o.Settings.disabledButtonClass;this.fastRecognition=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("fastforward.svg"),title:o.Strings.FAST_RECOGNITION}),this.stopRecognition=l.utils.create("img",{className:"image_button "+e,src:o.Settings.getResourcePath("stop.svg"),title:o.Strings.STOP_RECOGNITION}),this.stepRecognition=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("play.svg"),title:o.Strings.STEP_RECOGNITION}),t.push([this.fastRecognition,this.stepRecognition,this.stopRecognition])},initLBA.prototype.buildTape=function(t){this.tapeContainer=l.utils.create("div",{id:"tape"}),this.tapeContainer.style.display="none";for(var e=o.Settings.tapeDisplayedChars,i=0;i<e;i++){var n=l.utils.create("div",{className:"tape_cell"});this.tapeContainer.appendChild(n)}this.tapeContainer.children[(e-1)/2].classList.add("center"),t.push([this.tapeContainer])},initLBA.prototype.buildActionTree=function(t){this.actionTreeContainer=l.utils.create("div",{className:"none",id:"action_tree"}),this.actionTreeContainer.innerHTML=o.Strings.NO_RECOGNITION_IN_PROGRESS,t.push([this.actionTreeContainer])},initLBA.prototype.buildRecognitionProgress=function(t){this.progressContainer=l.utils.create("div",{id:"recognition_progress"}),this.progressContainer.style.display="none",t.push([this.progressContainer])},initLBA.prototype.buildMultipleRecognition=function(t){this.multipleCaseArea=l.utils.create("textarea"),this.multipleCaseArea.rows=o.Settings.multRecognitionAreaRows,this.multipleCaseArea.cols=o.Settings.multRecognitionAreaCols,this.multipleCaseResults=l.utils.create("div");var e=l.utils.create("div",{id:"multiple_recognition"});e.appendChild(this.multipleCaseArea),e.appendChild(this.multipleCaseResults),t.push([e]),this.multipleCaseButton=l.utils.create("img",{className:"image_button",src:o.Settings.getResourcePath("play.svg"),title:o.Strings.START_MULTIPLE_RECOGNITION}),t.push([this.multipleCaseButton])},initLBA.prototype.showAcceptanceStatus=function(){var t=o.Settings.controller();t.accepts()?(this.progressContainer.style.color=o.Settings.acceptedTestCaseColor,this.progressContainer.innerHTML=o.Strings.INPUT_ACCEPTED):(this.progressContainer.style.color=o.Settings.rejectedTestCaseColor,t.exhausted()?this.progressContainer.innerHTML=o.Strings.INPUT_LOOPING:this.progressContainer.innerHTML=o.Strings.INPUT_REJECTED)},initLBA.prototype.showTapeContent=function(){var t=o.Settings.controller(),e=t.getTapeContent(),i=t.getHeadPosition(),n=o.Settings.tapeDisplayedChars,r=i-(n-1)/2;if(r<0){for(var a=[],s=0;s<-r;s++)a.push("_");e=a.concat(e),r=0}if(r+n>e.length)for(var l=r+n-e.length,s=0;s<l;s++)e.push("_");for(var c=e.slice(r,r+n),s=0;s<n;s++)this.tapeContainer.children[s].innerHTML=c[s]},initLBA.prototype.showActionTree=function(){var t=o.Settings.controller().getActionTree();if(0==t.length)return this.actionTreeContainer.classList.add("none"),void(this.actionTreeContainer.innerHTML=o.Strings.ACTION_TREE_NO_ACTIONS);this.actionTreeContainer.classList.remove("none"),this.actionTreeContainer.innerHTML="";for(var e=0,i=t;e<i.length;e++){var n=i[e],r=l.utils.create("div",{className:"entry"});this.showAction(r,n),this.actionTreeContainer.appendChild(r)}},initLBA.prototype.showAction=function(t,e){var i=e.currentTape;i.write(e.tapeWrite),i.moveHead(e.moveDirection);var n=[e.targetState,this.tapeToHTML(i)];t.appendChild(l.utils.span("("+n.join(", ")+")"))},initLBA.prototype.tapeToHTML=function(t){var e=t.toArray(),i=t.getHeadPosition(),n=i>=0&&i<e.length;return(i>=0?e.slice(0,i).join(""):"")+"<span class='tape_pointer'>"+(n?e[i]:"_")+"</span>"+e.slice(i+1).join("")},initLBA.prototype.clearActionTree=function(){this.actionTreeContainer.classList.add("none"),this.actionTreeContainer.innerHTML=o.Strings.NO_RECOGNITION_IN_PROGRESS},initLBA.prototype.bindRecognitionEvents=function(){var t=o.Settings.disabledButtonClass,e=!0,i=!0,n=!1,r=this,s=function(i){e=i,r.fastRecognition.classList[i?"remove":"add"](t)},c=function(e){i=e,r.stepRecognition.classList[e?"remove":"add"](t)},u=function(e){n=e,r.stopRecognition.classList[e?"remove":"add"](t)};this.fastRecognition.addEventListener("click",function(){if(e){var t=r.testCase();o.Settings.controller().fastForward(t),r.highlightCurrentStates(),r.progressContainer.style.display="",r.showAcceptanceStatus(),r.tapeContainer.style.display="",r.showTapeContent(),r.showActionTree(),s(!1),c(!1),u(!0),r.testCaseInput.disabled=!0}}),this.stopRecognition.addEventListener("click",function(){n&&(o.Settings.controller().stop(),a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"recognitionDim",data:[]}),a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"unlock",data:[]}),r.progressContainer.style.color="black",r.progressContainer.style.display="none",r.tapeContainer.style.display="none",r.clearActionTree(),s(!0),c(!0),u(!1),r.testCaseInput.disabled=!1)}),this.stepRecognition.addEventListener("click",function(){if(i){s(!1),u(!0),r.testCaseInput.disabled=!0;var t=r.testCase(),e=o.Settings.controller();e.isStopped()&&(e.reset(),a.SignalEmitter.emitSignal({targetID:o.Settings.mainControllerSignalID,identifier:"lock",data:[]}),r.tapeContainer.style.display="");var n=e.finished(t);n||(e.step(t),r.highlightCurrentStates(),n=e.finished(t),r.showTapeContent(),r.showActionTree()),n&&(c(!1),r.progressContainer.style.display="",r.showAcceptanceStatus())}}),this.multipleCaseButton.addEventListener("click",function(){var t=r.multipleCaseArea.value.split("\n"),e=o.Settings.controller();r.multipleCaseResults.innerHTML="";for(var i=0,n=t;i<n.length;i++){var a=n[i];e.fastForward(a);var s=l.utils.create("span");e.accepts()?(s.style.color=o.Settings.acceptedTestCaseColor,s.innerHTML=o.Strings.INPUT_ACCEPTED):(s.style.color=o.Settings.rejectedTestCaseColor,e.exhausted()?s.innerHTML=o.Strings.INPUT_LOOPING.split("<br>").join(" "):s.innerHTML=o.Strings.INPUT_REJECTED),r.multipleCaseResults.appendChild(s)}})},initLBA.prototype.bindShortcuts=function(){var t=this;this.boundShortcuts||(s.System.bindShortcut(o.Settings.shortcuts.focusTestCase,function(){t.testCaseInput.focus()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.fastForward,function(){t.fastRecognition.click()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.step,function(){t.stepRecognition.click()},this.shortcutGroup),s.System.bindShortcut(o.Settings.shortcuts.stop,function(){t.stopRecognition.click()},this.shortcutGroup),this.boundShortcuts=!0),this.testCaseInput.addEventListener("keydown",function(e){var i=o.Settings.shortcuts.dimTestCase[0];e.keyCode==n.Keyboard.keys[i]&&t.testCaseInput.blur()})},initLBA}();i.initLBA=c},{"../../Keyboard":5,"../../Settings":9,"../../SignalEmitter":10,"../../System":11,"../../Utils":12,"../../interface/Menu":19}],42:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../datastructures/UnorderedSet"),o=t("../../Utils");!function(t){t[t.NEVER=0]="NEVER",t[t.ACCEPTING_STATE=1]="ACCEPTING_STATE",t[t.EMPTY_STACK=2]="EMPTY_STACK",t[t.BOTH=3]="BOTH"}(n=i.AcceptingHeuristic||(i.AcceptingHeuristic={}));var a=function(){function PDA(){this.stateList=[],this.inputAlphabet={},this.stackAlphabet={},this.transitions={},this.initialState=-1,this.finalStates=new r.UnorderedSet,this.numRemovedStates=0,this.currentState=null,this.stack=[],this.actionTree=[],this.halt=!0,this.acceptingHeuristic=n.ACCEPTING_STATE}return PDA.prototype.setAcceptingHeuristic=function(t){this.acceptingHeuristic=t},PDA.prototype.addState=function(t){this.stateList.push(t);var e=this.realNumStates()-1;return this.transitions[e]={},-1==this.initialState&&(this.initialState=e,this.reset()),e},PDA.prototype.removeState=function(t){o.utils.foreach(this.transitions,function(e,i){var n=parseInt(e);o.utils.foreach(i,function(e,i){o.utils.foreach(i,function(e,i){for(var r=0;r<i.length;)n==t||i[r][0]==t?i.splice(r,1):r++})})}),delete this.transitions[t],this.initialState==t&&this.unsetInitialState(),this.finalStates.erase(t),this.stateList[t]=void 0,this.numRemovedStates++},PDA.prototype.renameState=function(t,e){this.stateList[t]=e},PDA.prototype.addTransition=function(t,e,i){var n=this.transitions[t],r=i[0],o=i[1],a=i[2].split("").reverse().join("");n.hasOwnProperty(r)||(n[r]={}),n[r].hasOwnProperty(o)||(n[r][o]=[]),n[r][o].push([e,a]),this.addInputSymbol(r),this.addStackSymbol(o);for(var s=0;s<a.length;s++)this.addStackSymbol(a[s])},PDA.prototype.removeTransition=function(t,e,i){var n=this.transitions[t],r=i[0],o=i[1],a=i[2].split("").reverse().join("");if(n.hasOwnProperty(r)&&n[r].hasOwnProperty(o))for(var s=n[r][o],l=0;l<s.length;l++){var c=s[l];if(c[0]==e&&c[1]==a){s.splice(l,1);break}}},PDA.prototype.setInitialState=function(t){t<this.realNumStates()&&(this.initialState=t)},PDA.prototype.unsetInitialState=function(){this.initialState=-1},PDA.prototype.getInitialState=function(){return this.stateList[this.initialState]},PDA.prototype.addAcceptingState=function(t){this.finalStates.insert(t)},PDA.prototype.removeAcceptingState=function(t){this.finalStates.erase(t)},PDA.prototype.getAcceptingStates=function(){var t=[],e=this;return this.finalStates.forEach(function(i){t.push(e.stateList[i])}),t},PDA.prototype.getCurrentState=function(){if(null!==this.currentState)return this.stateList[this.currentState]},PDA.prototype.getStates=function(){return this.stateList.filter(function(t){return void 0!==t})},PDA.prototype.transitionIteration=function(t){var e=this;o.utils.foreach(this.transitions,function(i,n){o.utils.foreach(n,function(n,r){o.utils.foreach(r,function(r,o){for(var a=e.stateList[parseInt(i)],s=0,l=o;s<l.length;s++){var c=l[s],u=e.stateList[c[0]],h=c[1].split("").reverse().join("");t(a,[u,h],n,r)}})})})},PDA.prototype.getInputAlphabet=function(){var t=[];for(var e in this.inputAlphabet)this.inputAlphabet.hasOwnProperty(e)&&t.push(e);return t},PDA.prototype.getStackAlphabet=function(){var t=[];for(var e in this.stackAlphabet)this.stackAlphabet.hasOwnProperty(e)&&t.push(e);return t},PDA.prototype.getStackContent=function(){return this.stack},PDA.prototype.setInput=function(t){this.input=t,this.stack=["$"],this.stepIndex=0,this.actionTree=this.getPossibleActions(),this.halt=!1},PDA.prototype.getCurrentInput=function(){return this.input},PDA.prototype.getActionTree=function(){for(var t=[],e=0,i=this.actionTree;e<i.length;e++){var n=i[e];t.push({stepIndex:n.stepIndex,currentInput:n.currentInput,currentStack:n.currentStack,inputRead:n.inputRead,stackWrite:n.stackWrite,targetState:this.stateList[n.targetState]})}return t},PDA.prototype.read=function(){if(!this.error()){var t=this.actionTree;if(0==this.input.length&&this.accepts())this.halt=!0;else{if(0==t.length)return this.currentState=null,this.input="",void(this.halt=!0);var e=t[t.length-1];this.processAction(e),this.actionTree.pop(),this.halt=!1;var i=this.getPossibleActions();(n=this.actionTree).push.apply(n,i),0==i.length&&0==this.input.length&&this.accepts()&&(this.halt=!0);var n}}},PDA.prototype.halted=function(){return this.halt},PDA.prototype.reset=function(){-1==this.initialState?this.currentState=null:this.currentState=this.initialState,this.stack=[],this.stepIndex=0,this.actionTree=[],this.halt=!0},PDA.prototype.clear=function(){this.stateList=[],this.inputAlphabet={},this.stackAlphabet={},this.transitions={},this.unsetInitialState(),this.finalStates.clear(),this.numRemovedStates=0,this.currentState=null,this.stack=[],this.stepIndex=0,this.actionTree=[],this.halt=!0},PDA.prototype.accepts=function(){if(null===this.currentState)return!1;var t=!1;return this.acceptingHeuristic&n.ACCEPTING_STATE&&(t=t||this.finalStates.contains(this.currentState)),this.acceptingHeuristic&n.EMPTY_STACK&&(t=t||0==this.stack.length),t},PDA.prototype.error=function(){return null===this.currentState},PDA.prototype.numStates=function(){return this.stateList.length-this.numRemovedStates},PDA.prototype.getPossibleActions=function(){var t=[];return this.input.length>0&&this.handleInputSymbol(this.input[0],t),this.handleInputSymbol("",t),t},PDA.prototype.handleInputSymbol=function(t,e){if(null!==this.currentState){var i=this.transitions[this.currentState];if(i.hasOwnProperty(t)){var n=i[t],r=this.stack[this.stack.length-1];if(n.hasOwnProperty(r))for(var a=0,s=n[r];a<s.length;a++){var l=s[a];e.push({stepIndex:this.stepIndex+1,currentInput:this.input,currentStack:o.utils.clone(this.stack),inputRead:t,stackWrite:l[1],targetState:l[0]})}}}},PDA.prototype.processAction=function(t){this.stepIndex=t.stepIndex,this.input=t.currentInput,this.stack=t.currentStack,""!=t.inputRead&&(this.input=this.input.slice(1)),this.stack.pop();for(var e=0;e<t.stackWrite.length;e++)this.stack.push(t.stackWrite[e]);this.currentState=t.targetState},PDA.prototype.addSymbol=function(t,e){e.length>0&&(this[t].hasOwnProperty(e)||(this[t][e]=0),this[t][e]++)},PDA.prototype.addInputSymbol=function(t){this.addSymbol("inputAlphabet",t)},PDA.prototype.addStackSymbol=function(t){this.addSymbol("stackAlphabet",t)},PDA.prototype.removeSymbol=function(t,e){e.length>0&&(this[t][e]--,0==this[t][e]&&delete this[t][e])},PDA.prototype.removeInputSymbol=function(t){this.removeSymbol("inputAlphabet",t)},PDA.prototype.removeStackSymbol=function(t){this.removeSymbol("stackAlphabet",t)},PDA.prototype.realNumStates=function(){return this.stateList.length},PDA}();i.PDA=a},{"../../Utils":12,"../../datastructures/UnorderedSet":14}],43:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./PDA"),r=t("../../Keyboard"),o=t("../../Prompt"),a=t("../../Settings"),s=t("../../Utils"),l=function(){function PDAController(){this.stateMapping={},this.stepIndex=-1,this.input=null,this.editingCallback=function(){},this.machine=new n.PDA}return PDAController.prototype.edgePrompt=function(t,e){var i=this,n=new o.Prompt(a.Strings.PDA_ENTER_EDGE_CONTENT);return n.addInput({placeholder:a.Strings.PDA_ENTER_EDGE_PLACEHOLDER_1,validator:s.utils.optionalSymbolValidator}),n.addInput({placeholder:a.Strings.PDA_ENTER_EDGE_PLACEHOLDER_2,validator:s.utils.singleSymbolValidator}),n.addInput({placeholder:a.Strings.PDA_ENTER_EDGE_PLACEHOLDER_3}),n.onSuccess(function(e){t(e,i.edgeDataToText(e))}),n.onAbort(e),n},PDAController.prototype.edgeDataToText=function(t){var e=r.Keyboard.symbols.epsilon;return(t[0]||e)+","+(t[1]||e)+" → "+(t[2]||e)},PDAController.prototype.createState=function(t){var e=t.name,i=this.machine.addState(e);this.stateMapping[e]=i,t.initial&&this.machine.setInitialState(i),t.final&&this.machine.addAcceptingState(i),this.editingCallback()},PDAController.prototype.createTransition=function(t,e,i){var n=this.index(t),r=this.index(e);this.machine.addTransition(n,r,i),this.editingCallback()},PDAController.prototype.changeInitialFlag=function(t){t.initial?this.machine.setInitialState(this.index(t)):this.machine.unsetInitialState(),this.editingCallback()},PDAController.prototype.changeFinalFlag=function(t){var e=this.index(t);t.final?this.machine.addAcceptingState(e):this.machine.removeAcceptingState(e),this.editingCallback()},PDAController.prototype.renameState=function(t,e){var i=this.index(t);delete this.stateMapping[t.name],this.stateMapping[e]=i,this.machine.renameState(i,e),this.editingCallback()},PDAController.prototype.deleteState=function(t){this.machine.removeState(this.index(t)),this.editingCallback()},PDAController.prototype.deleteTransition=function(t,e,i){var n=this.index(t),r=this.index(e);this.machine.removeTransition(n,r,i),this.editingCallback()},PDAController.prototype.clear=function(){this.machine.clear(),this.editingCallback()},PDAController.prototype.fastForward=function(t){for(this.input=t,this.machine.reset(),this.machine.setInput(t);!this.machine.halted();)this.machine.read()},PDAController.prototype.step=function(t){this.input=t,this.finished(t)||(-1==this.stepIndex?(this.machine.reset(),this.machine.setInput(t)):this.machine.read(),this.stepIndex++)},PDAController.prototype.stop=function(){this.input=null,this.stepIndex=-1},PDAController.prototype.reset=function(){this.machine.reset()},PDAController.prototype.finished=function(t){return this.stepIndex>=0&&this.machine.halted()},PDAController.prototype.isStopped=function(){return-1==this.stepIndex},PDAController.prototype.stepPosition=function(){if(null===this.input)return this.stepIndex;var t=this.machine.getCurrentInput();return this.input.length-t.length},PDAController.prototype.getStackContent=function(){return this.machine.getStackContent()},PDAController.prototype.getActionTree=function(){return this.machine.getActionTree()},PDAController.prototype.setAcceptingHeuristic=function(t){this.machine.setAcceptingHeuristic(t)},PDAController.prototype.currentStates=function(){var t=this.machine.getCurrentState(),e=[];return this.machine.error()||e.push(t),e},PDAController.prototype.accepts=function(){return this.machine.accepts()},PDAController.prototype.formalDefinition=function(){var t=this.machine,e=r.Keyboard.symbols.delta,i=r.Keyboard.symbols.gamma,n=r.Keyboard.symbols.sigma,o={tupleSequence:["Q",n,i,e,"q0","Z0","F"],parameterSequence:["Q",n,i,"q0","Z0","F",e],parameterValues:{}},a=o.parameterValues;return a.Q=t.getStates(),a[n]=t.getInputAlphabet(),a[i]=t.getStackAlphabet(),a[e]=this.transitionTable(),a.q0=t.getInitialState(),a.Z0="$",a.F=t.getAcceptingStates(),o},PDAController.prototype.setEditingCallback=function(t){this.editingCallback=t},PDAController.prototype.applyOperation=function(t){},PDAController.prototype.index=function(t){return this.stateMapping[t.name]},PDAController.prototype.transitionTable=function(){var t=r.Keyboard.symbols,e=t.epsilon,i=t.gamma,n=["Q",t.sigma+" ∪ {"+e+"}",i,"Q",i+"*"],o={domain:s.utils.cartesianProduct(n[0],"("+n[1]+")",n[2]),codomain:s.utils.cartesianProduct(n[3],n[4]),header:n,list:[],metadata:[]};return this.machine.transitionIteration(function(t,e,i,n){var a=r.Keyboard.symbols.epsilon,s=e[0],l=e[1];o.list.push([t,i||a,n||a,s,l||a]),o.metadata.push([t,s,[i,n,l]])}),o},PDAController}();i.PDAController=l},{"../../Keyboard":5,"../../Prompt":8,"../../Settings":9,"../../Utils":12,"./PDA":42}],44:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../Keyboard"),o=t("../../interface/Menu"),a=t("./PDA"),s=t("../../Settings"),l=t("../../SignalEmitter"),c=t("../../System"),u=t("../../interface/Table"),h=t("../../Utils");!function(t){t[t.Tuple=0]="Tuple",t[t.Table=1]="Table"}(n||(n={}));var d=function(){function initPDA(){this.shortcutGroup="PDA",this.boundShortcuts=!1,this.actionNotation=n.Tuple}return initPDA.prototype.init=function(){var t=[this.buildRecognitionMenu(),this.buildStackContentMenu(),this.buildActionTreeMenu(),this.buildMultipleRecognitionMenu()];this.bindRecognitionEvents(),s.Settings.machines[s.Settings.Machine.PDA].sidebar=t,this.addCustomSettings()},initPDA.prototype.onEnter=function(){this.bindShortcuts(),c.System.unlockShortcutGroup(this.shortcutGroup)},initPDA.prototype.onExit=function(){this.stopRecognition.click(),c.System.lockShortcutGroup(this.shortcutGroup)},initPDA.prototype.addCustomSettings=function(){var t=h.utils.createSelect([s.Strings.PDA_TUPLE_NOTATION,s.Strings.PDA_TABLE_NOTATION]);t.selectedIndex=this.actionNotation;var e=this;t.addEventListener("change",function(){n.hasOwnProperty(this.selectedIndex.toString())&&(e.actionNotation=this.selectedIndex)}),s.Settings.addCustomSetting(s.Strings.PDA_ACTION_NOTATION,t)},initPDA.prototype.buildRecognitionMenu=function(){var t=new o.Menu(s.Strings.RECOGNITION),e=[];return this.buildTestCaseInput(e),this.buildRecognitionControls(e),this.buildRecognitionOptions(e),this.buildRecognitionProgress(e),this.addRows(e,t),t},initPDA.prototype.buildStackContentMenu=function(){var t=new o.Menu(s.Strings.STACK_MENUBAR),e=[];return this.buildStack(e),this.addRows(e,t),t},initPDA.prototype.buildActionTreeMenu=function(){var t=new o.Menu(s.Strings.ACTION_TREE_MENUBAR),e=[];return this.buildActionTree(e),this.addRows(e,t),t},initPDA.prototype.buildMultipleRecognitionMenu=function(){var t=new o.Menu(s.Strings.MULTIPLE_RECOGNITION),e=[];return this.buildMultipleRecognition(e),this.addRows(e,t),t},initPDA.prototype.addRows=function(t,e){for(var i=0,n=t;i<n.length;i++){for(var r=n[i],o=h.utils.create("div",{className:"row"}),a=0,s=r;a<s.length;a++){var l=s[a];o.appendChild(l)}e.add(o)}},initPDA.prototype.testCase=function(){return this.testCaseInput.value},initPDA.prototype.buildTestCaseInput=function(t){var e=h.utils.create("input",{type:"text",placeholder:s.Strings.TEST_CASE});t.push([e]),this.testCaseInput=e},initPDA.prototype.highlightCurrentStates=function(){var t=s.Settings.controller().currentStates();l.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"recognitionHighlight",data:[t]})},initPDA.prototype.buildRecognitionControls=function(t){var e=s.Settings.disabledButtonClass;this.fastRecognition=h.utils.create("img",{className:"image_button",src:s.Settings.getResourcePath("fastforward.svg"),title:s.Strings.FAST_RECOGNITION}),this.stopRecognition=h.utils.create("img",{className:"image_button "+e,src:s.Settings.getResourcePath("stop.svg"),title:s.Strings.STOP_RECOGNITION}),this.stepRecognition=h.utils.create("img",{className:"image_button",src:s.Settings.getResourcePath("play.svg"),title:s.Strings.STEP_RECOGNITION}),t.push([this.fastRecognition,this.stepRecognition,this.stopRecognition])},initPDA.prototype.buildRecognitionOptions=function(t){this.finalStateCheckbox=h.utils.checkbox(!0),this.emptyStackCheckbox=h.utils.checkbox(),t.push([this.finalStateCheckbox,h.utils.span(s.Strings.ACCEPT_BY_FINAL_STATE)]),t.push([this.emptyStackCheckbox,h.utils.span(s.Strings.ACCEPT_BY_EMPTY_STACK)])},initPDA.prototype.buildStack=function(t){this.stackContainer=h.utils.create("div",{className:"none",id:"stack"}),this.stackContainer.innerHTML=s.Strings.NO_RECOGNITION_IN_PROGRESS,t.push([this.stackContainer])},initPDA.prototype.buildActionTree=function(t){this.actionTreeContainer=h.utils.create("div",{className:"none",id:"action_tree"}),this.actionTreeContainer.innerHTML=s.Strings.NO_RECOGNITION_IN_PROGRESS,t.push([this.actionTreeContainer])},initPDA.prototype.buildRecognitionProgress=function(t){this.progressContainer=h.utils.create("div",{id:"recognition_progress"}),this.progressContainer.style.display="none",t.push([this.progressContainer])},initPDA.prototype.buildMultipleRecognition=function(t){this.multipleCaseArea=h.utils.create("textarea"),this.multipleCaseArea.rows=s.Settings.multRecognitionAreaRows,this.multipleCaseArea.cols=s.Settings.multRecognitionAreaCols,this.multipleCaseResults=h.utils.create("div");var e=h.utils.create("div",{id:"multiple_recognition"});e.appendChild(this.multipleCaseArea),e.appendChild(this.multipleCaseResults),t.push([e]),this.multipleCaseButton=h.utils.create("img",{className:"image_button",src:s.Settings.getResourcePath("play.svg"),title:s.Strings.START_MULTIPLE_RECOGNITION}),t.push([this.multipleCaseButton])},initPDA.prototype.showAcceptanceStatus=function(){s.Settings.controller().accepts()?(this.progressContainer.style.color=s.Settings.acceptedTestCaseColor,this.progressContainer.innerHTML=s.Strings.INPUT_ACCEPTED):(this.progressContainer.style.color=s.Settings.rejectedTestCaseColor,this.progressContainer.innerHTML=s.Strings.INPUT_REJECTED)},initPDA.prototype.showStackContent=function(){var t=s.Settings.controller().getStackContent();if(t.length>0){this.stackContainer.classList.remove("none"),this.stackContainer.innerHTML="";for(var e=t.length-1;e>=0;e--){var i=h.utils.span(t[e]);this.stackContainer.appendChild(i)}this.stackContainer.children[0].classList.add("top")}else this.stackContainer.classList.add("none"),this.stackContainer.innerHTML=s.Strings.EMPTY_STACK},initPDA.prototype.showActionTree=function(){var t=s.Settings.controller().getActionTree();if(0==t.length)return this.actionTreeContainer.classList.add("none"),void(this.actionTreeContainer.innerHTML=s.Strings.ACTION_TREE_NO_ACTIONS);this.actionTreeContainer.classList.remove("none"),this.actionTreeContainer.innerHTML="";for(var e=0,i=t;e<i.length;e++){var n=i[e],r=h.utils.create("div",{className:"entry"});this.showAction(r,n),this.actionTreeContainer.appendChild(r)}},initPDA.prototype.showAction=function(t,e){switch(this.actionNotation){case n.Table:this.showActionAsTable(t,e);break;case n.Tuple:this.showActionAsTuple(t,e);break;default:h.utils.assertNever(this.actionNotation)}},initPDA.prototype.showActionAsTable=function(t,e){for(var i=h.utils.clone(e.currentStack).reverse().join(""),n=r.Keyboard.symbols.epsilon,o=new u.Table(2),a=0,l=[s.Strings.PDA_FIELD_INPUT,e.currentInput,s.Strings.PDA_FIELD_STACK,i,s.Strings.PDA_FIELD_READ_INPUT,e.inputRead||n,s.Strings.PDA_FIELD_WRITE,e.stackWrite||n,s.Strings.PDA_FIELD_TARGET_STATE,e.targetState.toString()];a<l.length;a++){var c=l[a],d=h.utils.span(c);0==c.length&&(d.classList.add("none"),d.innerHTML=s.Strings.EMPTY),o.add(d)}t.appendChild(o.html())},initPDA.prototype.showActionAsTuple=function(t,e){var i=h.utils.clone(e.currentStack).reverse().join(""),n=r.Keyboard.symbols.epsilon,o=[e.targetState,e.currentInput||n,i];t.appendChild(h.utils.span("("+o.join(", ")+")"))},initPDA.prototype.clearStackContent=function(){this.stackContainer.classList.add("none"),this.stackContainer.innerHTML=s.Strings.NO_RECOGNITION_IN_PROGRESS},initPDA.prototype.clearActionTree=function(){this.actionTreeContainer.classList.add("none"),this.actionTreeContainer.innerHTML=s.Strings.NO_RECOGNITION_IN_PROGRESS},initPDA.prototype.bindRecognitionEvents=function(){var t=s.Settings.disabledButtonClass,e=!0,i=!0,n=!1,r=!0,o=!1,c=this,u=h.utils.create("span",{className:"parsed_input"}),d=h.utils.create("span",{className:"remaining_input"}),p=!1,g=function(i){e=i,c.fastRecognition.classList[i?"remove":"add"](t)},f=function(e){i=e,c.stepRecognition.classList[e?"remove":"add"](t)},S=function(e){n=e,c.stopRecognition.classList[e?"remove":"add"](t)},y=function(){var t;t=r&&o?a.AcceptingHeuristic.BOTH:r?a.AcceptingHeuristic.ACCEPTING_STATE:o?a.AcceptingHeuristic.EMPTY_STACK:a.AcceptingHeuristic.NEVER,s.Settings.controller().setAcceptingHeuristic(t)};this.fastRecognition.addEventListener("click",function(){if(e){var t=c.testCase();s.Settings.controller().fastForward(t),c.highlightCurrentStates(),c.progressContainer.style.display="",p=!1,c.showAcceptanceStatus(),c.showStackContent(),c.showActionTree(),g(!1),f(!1),S(!0),c.testCaseInput.disabled=!0}}),this.stopRecognition.addEventListener("click",function(){n&&(s.Settings.controller().stop(),l.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"recognitionDim",data:[]}),l.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"unlock",data:[]}),c.progressContainer.style.color="black",c.progressContainer.style.display="none",c.clearStackContent(),c.clearActionTree(),g(!0),f(!0),S(!1),c.testCaseInput.disabled=!1)}),this.stepRecognition.addEventListener("click",function(){if(i){g(!1),S(!0),c.testCaseInput.disabled=!0;var t=c.testCase(),e=s.Settings.controller();e.isStopped()&&(e.reset(),l.SignalEmitter.emitSignal({targetID:s.Settings.mainControllerSignalID,identifier:"lock",data:[]}),c.progressContainer.style.display="",c.stackContainer.classList.remove("none"),c.actionTreeContainer.classList.remove("none"));var n=e.finished(t);if(n||(e.step(t),c.highlightCurrentStates(),n=e.finished(t),c.showStackContent(),c.showActionTree()),n)f(!1),p=!1,c.showAcceptanceStatus(),c.clearActionTree();else{var r=e.stepPosition();p||(c.progressContainer.innerHTML="",c.progressContainer.appendChild(u),c.progressContainer.appendChild(d),p=!0),u.innerHTML=t.substr(0,r),d.innerHTML=t.substr(r)}}}),this.multipleCaseButton.addEventListener("click",function(){var t=c.multipleCaseArea.value.split("\n"),e=s.Settings.controller();c.multipleCaseResults.innerHTML="";for(var i=0,n=t;i<n.length;i++){var r=n[i];e.fastForward(r);var o=h.utils.create("span");e.accepts()?(o.style.color=s.Settings.acceptedTestCaseColor,o.innerHTML=s.Strings.INPUT_ACCEPTED):(o.style.color=s.Settings.rejectedTestCaseColor,o.innerHTML=s.Strings.INPUT_REJECTED),c.multipleCaseResults.appendChild(o)}}),this.finalStateCheckbox.addEventListener("change",function(t){r=this.checked,y()}),this.emptyStackCheckbox.addEventListener("change",function(t){o=this.checked,y()})},initPDA.prototype.bindShortcuts=function(){var t=this;this.boundShortcuts||(c.System.bindShortcut(s.Settings.shortcuts.focusTestCase,function(){t.testCaseInput.focus()},this.shortcutGroup),c.System.bindShortcut(s.Settings.shortcuts.fastForward,function(){t.fastRecognition.click()},this.shortcutGroup),c.System.bindShortcut(s.Settings.shortcuts.step,function(){t.stepRecognition.click()},this.shortcutGroup),c.System.bindShortcut(s.Settings.shortcuts.stop,function(){t.stopRecognition.click()},this.shortcutGroup),this.boundShortcuts=!0),this.testCaseInput.addEventListener("keydown",function(e){var i=s.Settings.shortcuts.dimTestCase[0];e.keyCode==r.Keyboard.keys[i]&&t.testCaseInput.blur()})},initPDA}();i.initPDA=d},{"../../Keyboard":5,"../../Settings":9,"../../SignalEmitter":10,"../../System":11,"../../Utils":12,"../../interface/Menu":19,"../../interface/Table":23,"./PDA":42}],45:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Settings"),r=t("./System"),o=t("./interface/UI"),a=t("./Utils");$(document).ready(function(){var t=a.utils.id(n.Settings.mainbarID);if(0!=t.innerHTML.length){t.innerHTML="",a.utils.id(n.Settings.sidebarID).innerHTML="";var e=document.getElementsByTagName("link")[0],i=document.getElementsByTagName("script")[0],s=[e.href,i.src],l=s[0],c=s[1],u=a.utils.divergence(l,c),h=u[0],d=u[1];a.utils.dirname(h)===a.utils.dirname(d)&&(n.Settings.imageFolder=c.replace(d,""))}n.Settings.update(),(new o.UI).render();var p=function(){var t=$("body").height()-$("#footer").height();$("#wrapper").css("height",t),$("#sidebar").css("height",t),$("#sidebar_content").css("max-height",t)};$(window).resize(p),p(),document.body.addEventListener("keydown",function(t){var e=document.activeElement.tagName.toLowerCase();return-1!=["input","textarea"].indexOf(e)||r.System.keyEvent(t)})})},{"./Settings":9,"./System":11,"./Utils":12,"./interface/UI":24}],46:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../EdgeUtils"),r=t("../Settings"),o=t("../SignalEmitter"),a=t("../Utils"),s=function(){function JSONHandler(){}return JSONHandler.prototype.save=function(t,e,i){var n=[r.Settings.Machine[r.Settings.currentMachine],[],[],-1];return this.saveStates(n,t,i),this.saveEdges(n,e),JSON.stringify(n)},JSONHandler.prototype.load=function(t){var e,i={aborted:!1,error:!1,initialState:null,stateList:{},edgeList:{}};try{e=JSON.parse(t)}catch(t){return i.error=!0,i}if(!this.matchesCorrectStructure(e))return i.error=!0,i;var n=r.Settings.Machine[r.Settings.currentMachine];if(e[0]!=n){var o=this.handleDifferentMachineType(e,i);if(o)return o}return this.loadStates(e,i,function(t){i.edgeList[t.name]={}}),this.loadEdges(e,i)?i:(i.error=!0,i)},JSONHandler.prototype.saveStates=function(t,e,i){a.utils.foreach(e,function(e,n){n==i&&(t[3]=t[1].length),t[1].push([n.name,n.final?1:0,n.x,n.y])})},JSONHandler.prototype.saveEdges=function(t,e){n.EdgeUtils.edgeIteration(e,function(e){t[2].push([e.origin.name,e.target.name,e.dataList])})},JSONHandler.prototype.matchesCorrectStructure=function(t){return"string"==typeof t[0]&&t[1]instanceof Array&&t[2]instanceof Array&&"number"==typeof t[3]},JSONHandler.prototype.handleDifferentMachineType=function(t,e){return confirm(r.Strings.DIFFERENT_MACHINE_FILE)?(a.utils.foreach(r.Settings.machines,function(e,i){return i.abbreviatedName!=t[0]||(o.SignalEmitter.emitSignal({targetID:r.Settings.sidebarSignalID,identifier:"changeMachineType",data:[e]}),!1)}),null):(e.aborted=!0,e)},JSONHandler.prototype.loadStates=function(t,e,i){for(var n=r.Settings.controller(),o=0;o<t[1].length;o++){var a=t[1][o],s=t[3]==o,l={x:a[2],y:a[3],initial:s,final:!!a[1],name:a[0],type:"state"};s&&(e.initialState=l),i(l),e.stateList[l.name]=l,n.createState(l)}},JSONHandler.prototype.loadEdges=function(t,e){for(var i=e.stateList,r=e.edgeList,o=0,a=t[2];o<a.length;o++){var s=a[o];if(3!=s.length)return!1;for(var l=s[0],c=s[1],u=s[2],h={origin:i[l],target:i[c],textList:[],dataList:[],type:"edge"},d=0,p=u;d<p.length;d++){var g=p[d];n.EdgeUtils.addEdgeData(h,g)}r[l][c]=h}return!0},JSONHandler}();i.JSONHandler=s},{"../EdgeUtils":3,"../Settings":9,"../SignalEmitter":10,"../Utils":12}]},{},[45]);
