var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};define("interface/Renderer",["require","exports"],function(t,e){"use strict";var n=function(){function t(){}return t.prototype.bind=function(t){this.node=t,this.onBind()},t.prototype.render=function(){this.node&&this.onRender()},t.prototype.onBind=function(){},t}();e.Renderer=n}),define("languages/English",["require","exports"],function(t,e){"use strict";var n;!function(t){t.strings={SELECT_MACHINE:"Machine Selection",DFA:"DFA",NFA:"NFA",PDA:"PDA",LBA:"LBA"}}(n=e.english||(e.english={}))}),define("Settings",["require","exports","languages/English"],function(t,e,n){"use strict";var i;!function(t){t.sidebarID="sidebar",t.mainbarID="mainbar",t.slideInterval=300,t.machineSelRows=2,t.machineSelColumns=2,t.stateLabelFontFamily="sans-serif",t.stateLabelFontSize=20,t.stateRadius=32,t.stateRingRadius=27,t.stateDragTolerance=50,t.stateFillColor="white",t.stateStrokeColor="black",function(t){t[t.DFA=0]="DFA",t[t.NFA=1]="NFA",t[t.PDA=2]="PDA",t[t.LBA=3]="LBA"}(t.Machine||(t.Machine={}));var e=t.Machine;t.language=n.english,t.currentMachine=e.DFA,t.machines={},t.machines[e.DFA]={name:t.language.strings.DFA},t.machines[e.NFA]={name:t.language.strings.NFA},t.machines[e.PDA]={name:t.language.strings.PDA},t.machines[e.LBA]={name:t.language.strings.LBA}}(i=e.Settings||(e.Settings={})),e.Strings=i.language.strings}),define("interface/State",["require","exports","Settings"],function(t,e,n){"use strict";var i=function(){function t(){this.body=null,this.ring=null,this.name="",this.initial=!1,this.final=!1}return t.prototype.setPosition=function(t,e){this.x=t,this.y=e},t.prototype.setName=function(t){this.name=t},t.prototype.setInitial=function(t){this.initial=t},t.prototype.setFinal=function(t){this.final=t},t.prototype.isFinal=function(){return this.final},t.prototype.render=function(t){this.body?this.body.attr({cx:this.x,cy:this.y}):(this.body=t.circle(this.x,this.y,n.Settings.stateRadius),this.body.attr("fill",n.Settings.stateFillColor),this.body.attr("stroke",n.Settings.stateStrokeColor),t.text(this.x,this.y,this.name).attr({"font-family":n.Settings.stateLabelFontFamily,"font-size":n.Settings.stateLabelFontSize})),this.final?this.ring?this.ring.attr({cx:this.x,cy:this.y}):(this.ring=t.circle(this.x,this.y,n.Settings.stateRingRadius),this.ring.attr("stroke",n.Settings.stateStrokeColor)):this.ring&&(this.ring.remove(),this.ring=null)},t.prototype.html=function(){return this.body?this.body.node:null},t.prototype.drag=function(t){var e,n=this,i=function(t,e){n.body.attr({cx:t,cy:e}),n.ring&&n.ring.attr({cx:t,cy:e}),n.setPosition(t,e)},r=function(t,n,i){return this.ox=this.attr("cx"),this.oy=this.attr("cy"),e=0,null},s=function(t,n,r,s,a){var o=this.attr("cx")-this.ox,c=this.attr("cy")-this.oy,u=o*o+c*c;return u>e&&(e=u),i(this.ox+t,this.oy+n),null},a=function(n){var r=this.attr("cx")-this.ox,s=this.attr("cy")-this.oy;i(this.ox,this.oy);var a=t.call(this,e);return a&&i(this.ox+r,this.oy+s),null};this.body.drag(s,r,a)},t}();e.State=i}),define("interface/Mainbar",["require","exports","interface/Renderer","interface/State","Settings"],function(t,e,n,i,r){"use strict";var s=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.onRender=function(){var t=800,e=600,n=Raphael(this.node,t,e),s=[new i.State,new i.State,new i.State];s[0].setPosition(120,120),s[0].setFinal(!0),s[1].setPosition(300,80),s[2].setPosition(340,320);for(var a=function(t){t.render(n),t.drag(function(e){return!(e<=r.Settings.stateDragTolerance)||(t.setFinal(!t.isFinal()),t.render(n),!1)})},o=0,c=s;o<c.length;o++){var u=c[o];a(u)}},e}(n.Renderer);e.Mainbar=s}),define("Utils",["require","exports"],function(t,e){"use strict";var n;!function(t){function e(t){return document.querySelector(t)}function n(t){return e("#"+t)}function i(t){return document.createElement(t)}function r(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}t.select=e,t.id=n,t.create=i,t.foreach=r}(n=e.utils||(e.utils={}))}),define("interface/Menu",["require","exports","interface/Renderer","Settings","Utils"],function(t,e,n,i,r){"use strict";var s=function(t){function e(e){t.call(this),this.title=e,this.children=[]}return __extends(e,t),e.prototype.add=function(t){this.children.push(t)},e.prototype.clear=function(){this.children=[]},e.prototype.onRender=function(){var t=this.node,e=r.utils.create("div");e.classList.add("menu");var n=r.utils.create("div");n.classList.add("title"),n.innerHTML=this.title,e.appendChild(n);var s=r.utils.create("div");s.classList.add("content");for(var a=0,o=this.children;a<o.length;a++){var c=o[a];s.appendChild(c)}e.appendChild(s),t.appendChild(e),n.addEventListener("click",function(){$(s).is(":animated")||$(s).slideToggle(i.Settings.slideInterval)})},e}(n.Renderer);e.Menu=s}),define("interface/Table",["require","exports","interface/Renderer","Utils"],function(t,e,n,i){"use strict";var r=function(t){function e(e,n){t.call(this),this.numRows=e,this.numColumns=n,this.children=[]}return __extends(e,t),e.prototype.add=function(t){this.children.push(t)},e.prototype.html=function(){for(var t=i.utils.create("table"),e=0,n=0;n<this.numRows;n++){for(var r=i.utils.create("tr"),s=0;s<this.numColumns;s++){var a=i.utils.create("td");e<this.children.length&&a.appendChild(this.children[e]),r.appendChild(a),e++}t.appendChild(r)}return t},e.prototype.onRender=function(){this.node.appendChild(this.html())},e}(n.Renderer);e.Table=r}),define("interface/Sidebar",["require","exports","interface/Menu","interface/Renderer","Settings","Settings","interface/Table","Utils"],function(t,e,n,i,r,s,a,o){"use strict";var c=function(t){function e(){t.call(this),this.machineSelection=new n.Menu(s.Strings.SELECT_MACHINE),this.temp=new n.Menu("TEMPORARY");var e=o.utils.create("span");e.innerHTML="Lorem ipsum dolor sit amet",this.temp.add(e)}return __extends(e,t),e.prototype.onBind=function(){this.machineSelection.bind(this.node),this.temp.bind(this.node)},e.prototype.onRender=function(){this.node.innerHTML="",this.build(),this.machineSelection.render(),r.Settings.currentMachine==r.Settings.Machine.DFA&&this.temp.render()},e.prototype.build=function(){var t=new a.Table(r.Settings.machineSelRows,r.Settings.machineSelColumns),e=this;o.utils.foreach(r.Settings.machines,function(n,i){var s=o.utils.create("input");s.type="button",s.value=i.name,s.disabled=n==r.Settings.currentMachine,s.addEventListener("click",function(){r.Settings.currentMachine=n,e.render()}),t.add(s)}),this.machineSelection.clear(),this.machineSelection.add(t.html())},e}(i.Renderer);e.Sidebar=c}),define("interface/UI",["require","exports","Settings","Utils"],function(t,e,n,i){"use strict";var r=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.bindSidebar(t[0]),this.bindMain(t[1])}return t.prototype.render=function(){this.sidebarRenderer&&this.sidebarRenderer.render(),this.mainRenderer&&this.mainRenderer.render(),console.log("Interface ready.")},t.prototype.bindSidebar=function(t){t&&t.bind(i.utils.id(n.Settings.sidebarID)),this.sidebarRenderer=t},t.prototype.bindMain=function(t){t&&t.bind(i.utils.id(n.Settings.mainbarID)),this.mainRenderer=t},t}();e.UI=r}),define("main",["require","exports","interface/Mainbar","interface/Sidebar","interface/UI"],function(t,e,n,i,r){"use strict";$(document).ready(function(){var t=new r.UI(new i.Sidebar,new n.Mainbar);t.render()})});
